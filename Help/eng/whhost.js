var gaChunks=new Array();var gaFakes=new Array();var gaDataCon=null;var gaData=new Array();var gbFindCK=false;var gbNeedCalc=false;var gbScrl=false;var gbProcess=false;var gbReady=false;var gnCheck=0;var gnNum=0;var gnIns=-1;var gnLoad=0;var gnRef=-1;var gnMaxItems=0;var gnMaxMargin=32000;var gnNeeded=0;var gnNKI=-1;var gnRE=0;var gnScrlMgn=30;var gnSE=0;var gnVisible=0;var gnItems=0;var gnUHeight=1;var gsBCK=null;var gsChK=null;var gsCK=null;var gsLoadingDivID="LoadingDiv";var gsLoadingMsg="Đang nạp dữ liệu, vui lòng chờ...";var gsSKA=null;var gsSKB=null;var gbLoadInfo=false;function onLoadXMLError(){if(gbLoadInfo){var a=new Array();projReady(a)}else{var b=new Array();putData(b)}}function putDataXML(o,m){if(gbLoadInfo){var f=o.lastChild;if(f){var g=0;var j=new Array();var l=f.firstChild;while(l){if(l.nodeName=="chunkinfo"){var n=new Object();n.sBK=l.getAttribute("first");n.sEK=l.getAttribute("last");n.sFileName=l.getAttribute("url");n.nNum=parseInt(l.getAttribute("num"));g+=n.nNum;n.nTotal=g;j[j.length]=n}l=l.nextSibling}projReady(j)}}else{var f=o.lastChild;if(f){var i=new Array();var b=0;var e=0;var l=f.firstChild;while(l){b=e;if(l.nodeName=="key"){var k=l.getAttribute("name");if(k&&k.length>0){var c=l.getAttribute("target");var n=new Object();n.nType=2;n.sName=k;if(c){n.sTarget=c}n.nPKOff=b;i[i.length]=n;var h=i.length;processKey(l,i,n);e=i.length-h;n.nNKOff=e}}else{if(l.nodeName=="letter"){var a=l.getAttribute("name");if(a&&a.length>0){var n=new Object();n.nType=1;n.sName=a;n.nPKOff=b;e=0;n.nNKOff=e;i[i.length]=n}}else{if(l.nodeName=="entry"){var a=l.getAttribute("name");var d=l.getAttribute("value");if(a&&a.length>0){var n=new Object();n.sName=a;n.sDef=d;n.nPKOff=b;e=0;n.nNKOff=e;i[i.length]=n}}}}l=l.nextSibling}putData(i)}}}function processKey(h,g,m){var j=0;var b=0;var e=0;var l=h.firstChild;while(l){if(l.nodeName=="topic"){var c=l.getAttribute("name");var a=l.getAttribute("url");if(a&&a.length!=0){if(!c||c.length==0){c=a}var k=new Object();k.sName=c;k.sURL=a;if(!m.aTopics){m.aTopics=new Array()}m.aTopics[m.aTopics.length]=k}}else{if(l.nodeName=="key"){b=e;var c=l.getAttribute("name");if(c&&c.length!=0){var d=new Object();d.sName=c;d.nType=3;d.nPKOff=b;g[g.length]=d;var f=g.length;processKey(l,g,d);e=g.length-f;d.nNKOff=e}}}l=l.nextSibling}}function putData(b){endLoading();var a=goCData;if(a){a.aKs=b;if(gnNKI==-1){setTimeout("checkReady();",1)}else{gsSKA=getKByIdx(a,gnNKI);gbNeedCalc=true;gbScrl=true;gnNKI=-1;if(gsSKA){setTimeout("checkReady();",1)}else{markEnd();setTimeout("checkAgain();",50)}}}}function markEnd(){if(gbProcess){gbProcess=false}}function endLoading(){var a=getElement(gsLoadingDivID);if(a){a.style.visibility="hidden"}}function markBegin(){gbProcess=true}function beginLoading(){var a=getElement(gsLoadingDivID);if(a){a.style.top=document.body.scrollTop;a.style.visibility="visible"}}function indexHTMLPart(){this.sHTML="";this.nNeeded=0;this.nCurrent=0;this.nConsumed=0;this.sFK=null;this.sLK=null;this.addHTML=function(d,b,c,e,a){if(c){this.sHTML+=d}else{this.sHTML=d+this.sHTML}this.nCurrent++;this.nConsumed+=b;if(e){if(!this.sFK){this.sFK=a}if(!this.sLK){this.sLK=a}if(c){this.sLK=a}else{this.sFK=a}}};this.appendHTML=function(b,a){this.addSubHTML(b,a);if(!this.sFK){this.sFK=b.sFK}if(!this.sLK){this.sLK=b.sLK}if(a){this.sLK=b.sLK}else{this.sFK=b.sFK}};this.addSubHTML=function(b,a){if(a){this.sHTML+=b.sHTML}else{this.sHTML=b.sHTML+this.sHTML}this.nCurrent+=b.nCurrent;this.nConsumed+=b.nConsumed}}function getMaxUnits(){return Math.floor(gnMaxMargin/gnUHeight)+1}function getFakeItemsHTMLbyCount(g,c){var b=getMaxUnits();var f=Math.floor(c/b);var e="";for(var d=0;d<f;d++){e+=getFakeItemHTML(g,b-1)}var a=c%b;e+=getFakeItemHTML(g,a-1);return e}function getFakeItemHTML(b,a){return"<h6 name=fk"+b+" id=fk"+b+' style="margin-top:'+gnUHeight*a+';margin-bottom:0">&nbsp;</h6>'}function fakeItemsArea(e,d,c,b,a){this.nB=e;this.nNum=d;this.sKA=c;this.sKB=b;this.obj=a;this.nMargin=(d-1)*gnUHeight;this.setNum=function(k){var f=-1;var j=this.nMargin;this.nMargin=(k-1)*gnUHeight;j=j-this.nMargin;if(k>0){this.nNum=k;var g=getMaxUnits();f=Math.floor((k-1)/g);if(this.obj.length){this.obj[f].style.marginTop=((k-1)%g)*gnUHeight}else{this.obj.style.marginTop=((k-1)%g)*gnUHeight}}if(this.obj.length){for(var h=this.obj.length-1;h>f;h--){removeThis(this.obj[h])}}else{if(f==-1){removeThis(this.obj)}}return j};this.insertAdjacentHTML=function(g,f){if(g=="beforeBegin"){if(this.obj.length){this.obj[0].insertAdjacentHTML(g,f)}else{this.obj.insertAdjacentHTML(g,f)}}else{if(g=="afterEnd"){if(this.obj.length){if(gbMac&&gbIE5&&this.obj[this.obj.length-1].nextSibling){this.obj[this.obj.length-1].nextSibling.insertAdjacentHTML("beforeBegin",f)}else{this.obj[this.obj.length-1].insertAdjacentHTML(g,f)}}else{if(gbMac&&gbIE5&&this.obj.nextSibling){this.obj.nextSibling.insertAdjacentHTML("beforeBegin",f)}else{this.obj.insertAdjacentHTML(g,f)}}}}};this.getBtm=function(){if(gbSafari3){if(this.obj.length){return findPosition(this.obj[this.obj.length-1])}else{return findPosition(this.obj)}}if(this.obj.length){return this.obj[this.obj.length-1].offsetTop}else{return this.obj.offsetTop}};this.getTop=function(){return this.getBtm()-this.nMargin}}function usedItems(b,a){this.nB=b;this.nE=a;this.oN=null}function checkReady(){var k=gaChunks.length;var l=false;var a;var r=0;var m=(gsSKB==null);var p=m?gsSKA:gsSKB;if(p==null){markEnd();setTimeout("checkAgain();",50);return}if(!gsChK||p!=gsChK||gnNum==0){gnCheck=0;gsChK=p;a=new Array()}else{r=gnNum;a=gaDataCon}for(var h=gnCheck;h<k;h++){var t=getChunkedData(h,m,p);if(t){if(!t.aKs&&t.sFileName!=null){l=true;goCData=t;gnNum=r;gnCheck=h;gaDataCon=a;t.nProjId=h;gbLoadInfo=false;beginLoading();loadData2(gaData[h].sPPath+gaData[h].sDPath+t.sFileName);return}else{a[r++]=t}}}if(!l){gnNum=0;gsSKA=gsSKB=gsShowK=null;var o=new indexHTMLPart();var j=new Array();var g=new Array();var e=new Array();var d=new Array();if(gbNeedCalc||gbFindCK){gnIns=0}for(h=0;h<a.length;h++){j[h]=getIdxPos(a[h],m,p);if(gbNeedCalc||gbFindCK){gnIns+=j[h]+a[h].nTotal-a[h].nNum;if(!m){if(j[h]!=-1){if(a[h].aKs){gnIns+=a[h].aKs[j[h]].nNKOff}else{var c=j[h]+1;while(c<a[h].aKsOnly.length&&!a[h].aKsOnly[c]){c++}c=c-j[h]-1;gnIns+=c}}}}g[h]=j[h];getLimit(a,j,e,d,h)}if((gbNeedCalc||gbFindCK)&&!m&&gnIns!=-1){gnIns+=(a.length-1)}if(gnIns!=-1||gbFindCK){o.nNeeded=gnNeeded;var b=writeItems(o,a,j,d,e,m,1);if(o.nConsumed!=0){var q;if(!m){q=gnIns-o.nConsumed+1}else{q=gnIns}var f=document.body.scrollTop;if(insertIdxKs(q,o,gbScrl)){updateUsedK(a,g,j,m);if(!gbScrl&&gbMac){while(document.body.scrollTop!=f){document.body.scrollTop=f}}gbScrl=false}if(gbFindCK){gbFindCK=false;gbNeedCalc=true;gsSKB=o.sFK;gnIns=-1;setTimeout("checkReady();",50);return}}else{if(gbFindCK){gbFindCK=false;gbNeedCalc=true;gsSKB=getFirstKeyFromPos(a,j);gnIns=-1;setTimeout("checkReady();",50);return}}if(!findCKInDom()){return}gnNeeded=gnNeeded-o.nCurrent;gnIns=-1;markEnd();setTimeout("checkAgain();",50);gbNeedCalc=false}else{if(!findCKInDom()){return}markEnd();setTimeout("checkAgain();",50)}}}function getFirstKeyFromPos(b,a){var c=getBiggestChar();for(var d=0;d<a.length;d++){if(b[d].aKs&&b[d].aKs.length>0&&a[d]>=0&&a[d]<b[d].aKs.length){if(c==""||compare(c,b[d].aKs[a[d]].sName)>0){c=b[d].aKs[a[d]].sName}}}return c}function checkAgain(){if(!gbProcess){if(gsBCK!=null){gsCK=gsBCK;gsBCK=null;findCK()}else{markBegin();getUnitIdx(document.body.scrollTop,getClientHeight())}}else{setTimeout("checkAgain()",50)}}function getLimit(c,b,f,g,d){f[d]=c[d].nNum;g[d]=-1;var a=null;if(c[d].oUsedItems){var e=c[d].oUsedItems;do{if(e.nB>b[d]){f[d]=e.nB;break}a=e;e=e.oN}while(e!=null);if(a){g[d]=a.nE}}else{if(c[d].aKs==null){f[d]=g[d]=b[d]}}if(g[d]>=b[d]||f[d]<=b[d]){f[d]=g[d]=b[d]}}function getIdxPos(e,c,b){var g=e.aKs;var f;if(c){f=e.nNum}else{f=-1}if(g!=null){for(var d=0;d<g.length;d++){if(c){if(compare(g[d].sName,b)>0){f=d;break}}else{if(compare(g[d].sName,b)<0){f=d}else{break}}d+=g[d].nNKOff}}else{if(e.aKsOnly){var a=e.aKsOnly;for(var d=0;d<a.length;d++){if(a[d]){if(c){if(compare(a[d],b)>0){f=d;break}}else{if(compare(a[d],b)<0){f=d}else{break}}}}}}return f}function writeItems(l,a,h,e,f,k,j){var d=new Array();for(var g=0;g<h.length;g++){d[g]=h[g]}var b;do{var c="";var m=new Array();b=0;for(g=0;g<a.length;g++){if(a[g].aKs&&a[g].aKs.length&&h[g]!=-1&&(k&&h[g]<f[g])||(!k&&h[g]>e[g])){if(c==""||(k&&compare(c,a[g].aKs[h[g]].sName)>0)||(!k&&compare(c,a[g].aKs[h[g]].sName)<0)){c=a[g].aKs[h[g]].sName;b=0;m[b++]=g}else{if(compare(c,a[g].aKs[h[g]].sName)==0){m[b++]=g}}}else{if(j==1&&f[g]!=e[g]){if(k&&h[g]==f[g]){if(a[g].aKs){gsSKA=a[g].aKs[d[g]].sName;return false}}else{if(!k&&h[g]==e[g]){if(a[g].aKs){gsSKB=a[g].aKs[d[g]].sName;return false}}}}}}if(b>=1){for(var n=0;n<b;n++){d[m[n]]=h[m[n]]}mergeItems(l,k,a,m,b,h,j);adjustPosition(k,a,m,b,h);if(j==1&&l.nNeeded<=l.nCurrent){return true}}}while(b>0);return true}function updateUsedK(e,a,d,c){for(var g=0;g<e.length;g++){if(d[g]!=a[g]){var h=0;var f=0;if(c){h=a[g];f=d[g]-1}else{if(d[g]!=-1){h=d[g]+e[g].aKs[d[g]].nNKOff+1}else{h=0}f=a[g]+e[g].aKs[a[g]].nNKOff}if(h<=f){setContentsUsed(e[g],h,f);var b=e[g].oUsedItems;if(b.oN==null&&b.nB==0&&b.nE==e[g].nNum-1){storeKeysOnly(e[g]);e[g].oUsedItems=e[g].aKs=e[g].sFileName=null}}}}}function storeKeysOnly(a){a.aKsOnly=new Array();for(var b=0;b<a.aKs.length;b++){a.aKsOnly[b]=a.aKs[b].sName;b+=a.aKs[b].nNKOff}}function setContentsUsed(c,f,d){if(!c.oUsedItems){c.oUsedItems=new usedItems(f,d)}else{var e=c.oUsedItems;var a=null;do{if(e.nB>f){if(e.nB==d+1){e.nB=f}else{var b=new usedItems(e.nB,e.nE);b.oN=e.oN;e.nB=f;e.nE=d;e.oN=b}break}a=e;e=e.oN}while(e);if(!e){if(a!=null){a.oN=new usedItems(f,d)}}if(a!=null){if(a.nE==a.oN.nB-1){a.nE=a.oN.nE;a.oN=a.oN.oN}}}}function projInfo(c,a,b){this.sPPath=c;this.sDPath=a;this.sFile=b}function addProjInfo(c,a,b){var d=new projInfo(c,a,b);gaData[gaData.length]=d;return d}function writeDataIFrame(){if(gnLoad<gaData.length){gbLoadInfo=true;loadData2(gaData[gnLoad].sPPath+gaData[gnLoad].sDPath+gaData[gnLoad].sFile)}else{if(gnItems!=0){markBegin();writeFakeItems();gsSKA="";gnNeeded=gnVisible;gnIns=0;checkReady()}}}function getH6ById(a){if(document.all){return document.all("fk"+a)}else{if(document.getElementsByName){return document.getElementsByName("fk"+a)}}return null}function showItemsInEvaluation(d){var c=true;var b=d/gnItems;var e=Math.floor(b*gnMaxItems);var a=getChunkByIdx(gnRef,e);if(a){if(!a.aKs&&a.sFileName!=null){gnNKI=e;goCData=a;a.nProjId=gnRef;gbLoadInfo=false;beginLoading();loadData2(gaData[gnRef].sPPath+gaData[gnRef].sDPath+a.sFileName)}else{gsSKA=getKByIdx(a,e);if(gsSKA){gsSKB=null;gbNeedCalc=true;gbScrl=true;checkReady()}else{markEnd();c=false}}}else{markEnd();c=false}return c}function isUsed(a,b){var c=a.oUsedItems;while(c&&c.nB<=b){if(c.nE>=b){return true}c=c.oN}return false}function getKByIdx(a,e){var c=e-(a.nTotal-a.nNum);var b=a.aKs;if(c>=0&&b&&c<b.length){var d=null;do{d=b[c++]}while((d.nType==3||isUsed(a,c-1))&&c<b.length);if(d.nType!=3){return d.sName}else{c=e-(a.nTotal-a.nNum)-1;if(c>=0){do{d=b[c--]}while((d.nType==3||isUsed(a,c+1))&&c>=0)}if(d.nType!=3){return d.sName}}}return null}function loadData2(a){disEvt();if(gbXML){loadDataXML(a)}else{loadData(a)}enEvt()}function projReady(b){gaChunks[gnLoad++]=b;var a=b.length;var c=0;if(a>0){c=b[a-1].nTotal}gnItems+=c;if(c>gnMaxItems){gnMaxItems=c;gnRef=gnLoad-1}setTimeout("writeDataIFrame();",1)}function writeFakeItems(){disEvt();gnUHeight=15;if(gbSafari3&&!gbMac){gnUHeight=1}var a=getFakeItemsHTMLbyCount(0,gnItems);document.body.insertAdjacentHTML("beforeEnd",a);var b=getH6ById(0);if(document.body!=null){gnVisible=Math.ceil(getClientHeight()/gnUHeight)}gaFakes[0]=new fakeItemsArea(0,gnItems,"",getEndString(),b);enEvt()}function getEndString(){var a=getBiggestChar();return a+a+a+a+a+a+a+a}function getUnitIdx(i,f){if(gaFakes.length==0){markEnd();return}var g=0;var e=gaFakes.length-1;var b=-1;var a=0;var d=0;var h=false;do{b=(g+e)>>1;d=gaFakes[b].getBtm();a=gaFakes[b].getTop();if(a>=i+f){e=b-1}else{if(d<i){g=b+1}else{h=true;break}}}while(e>=g);if(h){if(a>=i){gsSKA=gaFakes[b].sKA;gsSKB=null;gnNeeded=Math.ceil((f-a+i)/gnUHeight);gnIns=gaFakes[b].nB;checkReady()}else{if(d<=i+f){gsSKB=gaFakes[b].sKB;gsSKA=null;gnNeeded=Math.ceil((d-i+gnScrlMgn)/gnUHeight);gbNeedCalc=true;checkReady()}else{gnNeeded=gnVisible;var c=gaFakes[b].nB+Math.floor((i-a)/gnUHeight);if(!showItemsInEvaluation(c)){gsSKA=gaFakes[b].sKA;gsSKB=null;gnNeeded=Math.ceil(f/gnUHeight);gnIns=gaFakes[b].nB;checkReady()}}}}else{markEnd()}}function disEvt(){window.onscroll=null;window.onresize=null}function enEvt(){window.onscroll=window_OnScroll;window.onresize=window_OnResize}function insertIdxKs(n,f,d){var e=true;disEvt();var b=f.nConsumed;var a=0;var s=gaFakes.length-1;var o=-1;var p=false;do{o=(a+s)>>1;if(gaFakes[o].nB>n){s=o-1}else{if(gaFakes[o].nB+gaFakes[o].nNum<=n){a=o+1}else{p=true;break}}}while(s>=a);if(p){var l=gaFakes[o];var g=l.getTop();var i=l.getBtm();var j=0;var k=n-l.nB;var c=l.nNum+l.nB-(n+b);if(k>0){j=l.setNum(k);var q=l.sKB;l.sKB=f.sFK;if(c>0){var m=getFakeItemsHTMLbyCount(n,c);l.insertAdjacentHTML("afterEnd",m);var h=getH6ById(n);insertItemIntoArray(gaFakes,o+1,new fakeItemsArea(n+b,c,f.sLK,q,h))}l.insertAdjacentHTML("afterEnd",f.sHTML);if(d){if(gbMac&&gbIE4){var r=i-j;while(document.body.scrollTop!=r){document.body.scrollTop=r}}else{window.scrollTo(0,i-j)}}}else{l.insertAdjacentHTML("beforeBegin",f.sHTML);if(d){if(gbMac&&gbIE4){var r=g;while(document.body.scrollTop!=r){document.body.scrollTop=r}}else{window.scrollTo(0,g)}}if(c>0){l.nB=n+b;j=l.setNum(c);l.sKA=f.sLK}else{gaFakes[o].setNum(0);removeItemFromArray(gaFakes,o)}}}else{e=false}enEvt();return e}function window_OnScroll(){gnSE++;setTimeout("procScroll();",50)}function procScroll(){if(gnSE==1&&!gbProcess){markBegin();getUnitIdx(document.body.scrollTop,getClientHeight())}gnSE--}function window_OnResize(){gnRE++;setTimeout("procResize();",50)}function procResize(){if(gnRE==1&&!gbProcess){markBegin();gnVisible=Math.ceil(getClientHeight()/gnUHeight);if(gnIns==-1){getUnitIdx(document.body.scrollTop,getClientHeight())}}gnRE--}function getChunkByIdx(f,c){var b=null;if(f<gaChunks.length){var a=gaChunks[f].length;if(a>0){var h=0;var e=a-1;var d=false;do{var g=(h+e)>>1;if(c<gaChunks[f][g].nTotal){d=true;e=g}else{h=g+1}}while(e>h);if(d){b=gaChunks[f][e]}else{if(c<gaChunks[f][h].nTotal){b=gaChunks[f][h]}}}}return b}function getChunkedData(b,e,g){var j=null;var a=-1;if(b<gaChunks.length){var d=gaChunks[b].length;if(d>0){var i=0;var f=d-1;var h=false;do{var c=(i+f+(e?0:1))>>1;if(e){if(compare(g,gaChunks[b][c].sEK)<0){h=true;f=c}else{i=c+1}}else{if(compare(g,gaChunks[b][c].sBK)>0){h=true;i=c}else{f=c-1}}}while(f>i);if(h){if(e){a=f}else{a=i}}else{if(e){if(gaChunks[b].length>i&&compare(g,gaChunks[b][i].sEK)<0){a=i}else{a=gaChunks[b].length-1}}else{if(0<=f&&compare(g,gaChunks[b][f].sBK)>0){a=f}else{a=0}}}return gaChunks[b][a]}}return null}function findCK(){if(gsCK!=null){gsSKA=gsCK;gbFindCK=true;gnNeeded=1;markBegin();checkReady()}}function writeLoadingDiv(a){return'<div id="'+gsLoadingDivID+'" style="position:absolute;top:0;left:0;z-index:600;visibility:hidden;padding-left:4px;background-color:ivory;border-width:1;border-style:solid;border-color:black;width:150px;">'+gsLoadingMsg+"</div>"}function findPosition(a){if(typeof(a.offsetParent)!="undefined"){for(var b=0;a;a=a.offsetParent){b+=a.offsetTop}return b}else{return a.y}}var gbWhHost=true;if(typeof(Sys)!=="undefined"){Sys.Application.notifyScriptLoaded()};