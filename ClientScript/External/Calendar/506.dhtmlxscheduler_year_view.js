scheduler.config.year_x=4;scheduler.config.year_y=3;scheduler.xy.year_top=0;scheduler.templates.year_date=function(n){return scheduler.date.date_to_str(scheduler.locale.labels.year_tab+" %Y")(n)};scheduler.templates.year_month=scheduler.date.date_to_str("%F");scheduler.templates.year_scale_date=scheduler.date.date_to_str("%D");scheduler.templates.year_tooltip=function(n,t,i){return i.text},function(){var n=function(){return scheduler._mode=="year"},t,i,r,u;scheduler.dblclick_dhx_month_head=function(t){var i,r,u;if(n()){if(i=t.target||t.srcElement,i.parentNode.className.indexOf("dhx_before")!=-1||i.parentNode.className.indexOf("dhx_after")!=-1)return!1;r=this.templates.xml_date(i.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("date"));r.setDate(parseInt(i.innerHTML,10));u=this.date.add(r,1,"day");!this.config.readonly&&this.config.dblclick_create&&this.addEventNow(r.valueOf(),u.valueOf(),t)}};t=scheduler.changeEventId;scheduler.changeEventId=function(){t.apply(this,arguments);n()&&this.year_view(!0)};var f=scheduler.render_data,e=scheduler.date.date_to_str("%Y/%m/%d"),o=scheduler.date.str_to_date("%Y/%m/%d");scheduler.render_data=function(t){if(!n())return f.apply(this,arguments);for(var i=0;i<t.length;i++)this._year_render_event(t[i])};i=scheduler.clear_view;scheduler.clear_view=function(){var t,r,u;if(!n())return i.apply(this,arguments);t=scheduler._year_marked_cells;r=null;for(u in t)t.hasOwnProperty(u)&&(r=t[u],r.className="dhx_month_head",r.setAttribute("date",""));scheduler._year_marked_cells={}};scheduler._hideToolTip=function(){this._tooltip&&(this._tooltip.style.display="none",this._tooltip.date=new Date(9999,1,1))};scheduler._showToolTip=function(n,t,i,r){var s,f,o,u,e,h,c;if(this._tooltip){if(this._tooltip.date.valueOf()==n.valueOf())return;this._tooltip.innerHTML=""}else s=this._tooltip=document.createElement("DIV"),s.className="dhx_year_tooltip",document.body.appendChild(s),s.onclick=scheduler._click.dhx_cal_data;for(f=this.getEvents(n,this.date.add(n,1,"day")),o="",u=0;u<f.length;u++)(e=f[u],this.filter_event(e.id,e))&&(h=e.color?"background:"+e.color+";":"",c=e.textColor?"color:"+e.textColor+";":"",o+="<div class='dhx_tooltip_line' style='"+h+""+c+"' event_id='"+f[u].id+"'>",o+="<div class='dhx_tooltip_date' style='"+h+""+c+"'>"+(f[u]._timed?this.templates.event_date(f[u].start_date):"")+"<\/div>",o+="<div class='dhx_event_icon icon_details'>&nbsp;<\/div>",o+=this.templates.year_tooltip(f[u].start_date,f[u].end_date,f[u])+"<\/div>");this._tooltip.style.display="";this._tooltip.style.top="0px";this._tooltip.style.left=document.body.offsetWidth-t.left-this._tooltip.offsetWidth<20?t.left-this._tooltip.offsetWidth+"px":t.left+r.offsetWidth-32+"px";this._tooltip.date=n;this._tooltip.innerHTML=o;this._tooltip.style.top=document.body.offsetHeight-t.top-this._tooltip.offsetHeight<0?t.top-this._tooltip.offsetHeight+r.offsetHeight+"px":t.top+"px"};scheduler._year_view_tooltip_handler=function(t){if(n()){var t=t||event,i=t.target||t.srcElement;i.tagName.toLowerCase()=="a"&&(i=i.parentNode);(i.className||"").indexOf("dhx_year_event")!=-1?scheduler._showToolTip(o(i.getAttribute("date")),getOffset(i),t,i):scheduler._hideToolTip()}};scheduler._init_year_tooltip=function(){scheduler._detachDomEvent(scheduler._els.dhx_cal_data[0],"mouseover",scheduler._year_view_tooltip_handler);dhtmlxEvent(scheduler._els.dhx_cal_data[0],"mouseover",scheduler._year_view_tooltip_handler)};scheduler.attachEvent("onSchedulerResize",function(){return n()?(this.year_view(!0),!1):!0});scheduler._get_year_cell=function(n){var t=n.getMonth()+12*(n.getFullYear()-this._min_date.getFullYear())-this.week_starts._month,i=this._els.dhx_cal_data[0].childNodes[t],n=this.week_starts[t]+n.getDate()-1;return i.childNodes[2].firstChild.rows[Math.floor(n/7)].cells[n%7].firstChild};scheduler._year_marked_cells={};scheduler._mark_year_date=function(n,t){var r=e(n),i=this._get_year_cell(n),u=this.templates.event_class(t.start_date,t.end_date,t);scheduler._year_marked_cells[r]||(i.className="dhx_month_head dhx_year_event",i.setAttribute("date",r),scheduler._year_marked_cells[r]=i);i.className+=u?" "+u:""};scheduler._unmark_year_date=function(n){this._get_year_cell(n).className="dhx_month_head"};scheduler._year_render_event=function(n){for(var t=n.start_date,t=t.valueOf()<this._min_date.valueOf()?this._min_date:this.date.date_part(new Date(t));t<n.end_date;)if(this._mark_year_date(t,n),t=this.date.add(t,1,"day"),t.valueOf()>=this._max_date.valueOf())return};scheduler.year_view=function(n){var t;if(n&&(t=scheduler.xy.scale_height,scheduler.xy.scale_height=-1),scheduler._els.dhx_cal_header[0].style.display=n?"none":"",scheduler.set_sizes(),n&&(scheduler.xy.scale_height=t),scheduler._table_view=n,!this._load_mode||!this._load())if(n){if(scheduler._init_year_tooltip(),scheduler._reset_year_scale(),scheduler._load_mode&&scheduler._load()){scheduler._render_wait=!0;return}scheduler.render_view_data()}else scheduler._hideToolTip()};scheduler._reset_year_scale=function(){var s,f,n,h,o,c,d,w;this._cols=[];this._colsS={};var l=[],r=this._els.dhx_cal_data[0],u=this.config;r.scrollTop=0;r.innerHTML="";s=Math.floor(parseInt(r.style.width)/u.year_x);f=Math.floor((parseInt(r.style.height)-scheduler.xy.year_top)/u.year_y);f<190&&(f=190,s=Math.floor((parseInt(r.style.width)-scheduler.xy.scroll_width)/u.year_x));var b=s-11,k=0,a=document.createElement("div"),v=this.date.week_start(scheduler._currentDate());for(n=0;n<7;n++)this._cols[n]=Math.floor(b/(7-n)),this._render_x_header(n,k,v,a),v=this.date.add(v,1,"day"),b-=this._cols[n],k+=this._cols[n];a.lastChild.className+=" dhx_scale_bar_last";var i=this.date[this._mode+"_start"](this.date.copy(this._date)),y=i,t=null;for(n=0;n<u.year_y;n++)for(h=0;h<u.year_x;h++){t=document.createElement("DIV");t.style.cssText="position:absolute;";t.setAttribute("date",this.templates.xml_format(i));t.innerHTML="<div class='dhx_year_month'><\/div><div class='dhx_year_week'>"+a.innerHTML+"<\/div><div class='dhx_year_body'><\/div>";t.childNodes[0].innerHTML=this.templates.year_month(i);var g=this.date.week_start(i),p=this._reset_month_scale(t.childNodes[2],i,g),e=t.childNodes[2].firstChild.rows;for(o=e.length;o<6;o++)for(e[0].parentNode.appendChild(e[0].cloneNode(!0)),c=0,d=e[o].childNodes.length;c<d;c++)e[o].childNodes[c].className="dhx_after",e[o].childNodes[c].firstChild.innerHTML=scheduler.templates.month_day(p),p=scheduler.date.add(p,1,"day");r.appendChild(t);t.childNodes[1].style.height=t.childNodes[1].childNodes[0].offsetHeight+"px";w=Math.round((f-190)/2);t.style.marginTop=w+"px";this.set_xy(t,s-10,f-w-10,s*h+5,f*n+5+scheduler.xy.year_top);l[n*u.year_x+h]=(i.getDay()-(this.config.start_on_monday?1:0)+7)%7;i=this.date.add(i,1,"month")}this._els.dhx_cal_date[0].innerHTML=this.templates[this._mode+"_date"](y,i,this._mode);this.week_starts=l;l._month=y.getMonth();this._min_date=y;this._max_date=i};r=scheduler.getActionData;scheduler.getActionData=function(t){if(!n())return r.apply(scheduler,arguments);var f=t?t.target:event.srcElement,i=scheduler._get_year_month_date(f),e=scheduler._get_year_month_cell(f),u=scheduler._get_year_day_indexes(e);return u&&i?(i=scheduler.date.add(i,u.week,"week"),i=scheduler.date.add(i,u.day,"day")):i=null,{date:i,section:null}};scheduler._get_year_day_indexes=function(n){var r=scheduler._locate_year_month_table(n),t,u,f,i,e;if(!r)return null;for(t=0,i=0,t=0,u=r.rows.length;t<u;t++){for(f=r.rows[t].getElementsByTagName("td"),i=0,e=f.length;i<e;i++)if(f[i]==n)break;if(i<e)break}return t<u?{day:i,week:t}:null};scheduler._get_year_month_date=function(n){var n=scheduler._locate_year_month_root(n),t;return n?(t=n.getAttribute("date"),!t)?null:scheduler.date.week_start(scheduler.templates.xml_date(t)):null};scheduler._locate_year_month_day=function(n){return n.className&&n.className.indexOf("dhx_year_event")!=-1&&n.hasAttribute&&n.hasAttribute("date")};u=scheduler._locate_event;scheduler._locate_event=function(n){var i=u.apply(scheduler,arguments),t,r,f;if(!i){if((t=scheduler._get_year_el_node(n,scheduler._locate_year_month_day),!t||!t.hasAttribute("date"))||(r=scheduler.templates.xml_date(t.getAttribute("date")),f=scheduler.getEvents(r,scheduler.date.add(r,1,"day")),!f.length))return null;i=f[0].id}return i};scheduler._locate_year_month_cell=function(n){return n.nodeName.toLowerCase()=="td"};scheduler._locate_year_month_table=function(n){return n.nodeName.toLowerCase()=="table"};scheduler._locate_year_month_root=function(n){return n.hasAttribute&&n.hasAttribute("date")};scheduler._get_year_month_cell=function(n){return this._get_year_el_node(n,this._locate_year_month_cell)};scheduler._get_year_month_table=function(n){return this._get_year_el_node(n,this._locate_year_month_table)};scheduler._get_year_month_root=function(n){return this._get_year_el_node(this._get_year_month_table(n),this._locate_year_month_root)};scheduler._get_year_el_node=function(n,t){while(n&&!t(n))n=n.parentNode;return n}}()
if (typeof (Sys) !== 'undefined') { Sys.Application.notifyScriptLoaded() };