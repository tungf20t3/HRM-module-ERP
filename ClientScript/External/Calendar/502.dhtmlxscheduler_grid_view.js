(function(){scheduler._grid={sort_rules:{int:function(n,t,i){return i(n)*1<i(t)*1?1:-1},str:function(n,t,i){return i(n)<i(t)?1:-1},date:function(n,t,i){return new Date(i(n))<new Date(i(t))?1:-1}},_getObjName:function(n){return"grid_"+n},_getViewName:function(n){return n.replace(/^grid_/,"")}}})();scheduler.createGridView=function(n){function f(n){return!(n!==undefined&&(n*1!=n||n<0))}var t=n.name||"grid",i=scheduler._grid._getObjName(t),u,r;for(scheduler.config[t+"_start"]=n.from||new Date(0),scheduler.config[t+"_end"]=n.to||new Date(9999,1,1),scheduler[i]=n,scheduler[i].defPadding=8,scheduler[i].columns=scheduler[i].fields,scheduler[i].unit=n.unit||"month",scheduler[i].step=n.step||1,delete scheduler[i].fields,u=scheduler[i].columns,r=0;r<u.length;r++)f(u[r].width)&&(u[r].initialWidth=u[r].width),f(u[r].paddingLeft)||delete u[r].paddingLeft,f(u[r].paddingRight)||delete u[r].paddingRight;scheduler[i].select=n.select===undefined?!0:n.select;scheduler.locale.labels[t+"_tab"]===undefined&&(scheduler.locale.labels[t+"_tab"]=scheduler[i].label||scheduler.locale.labels.grid_tab);scheduler[i]._selected_divs=[];scheduler.date[t+"_start"]=function(t){return scheduler.date[n.unit+"_start"]?scheduler.date[n.unit+"_start"](t):t};scheduler.date["add_"+t]=function(n,t){return scheduler.date.add(n,t*scheduler[i].step,scheduler[i].unit)};scheduler.templates[t+"_date"]=function(n,t){return scheduler.templates.day_date(n)+" - "+scheduler.templates.day_date(t)};scheduler.templates[t+"_full_date"]=function(n,i,r){return scheduler.isOneDayEvent(r)?this[t+"_single_date"](n):scheduler.templates.day_date(n)+" &ndash; "+scheduler.templates.day_date(i)};scheduler.templates[t+"_single_date"]=function(n){return scheduler.templates.day_date(n)+" "+this.event_date(n)};scheduler.templates[t+"_field"]=function(n,t){return t[n]};scheduler.attachEvent("onTemplatesReady",function(){var n,r;scheduler.attachEvent("onDblClick",function(n){return this._mode==t?(scheduler._click.buttons.details(n),!1):!0});scheduler.attachEvent("onClick",function(n,r){return this._mode==t&&scheduler[i].select?(scheduler._grid.unselectEvent("",t),scheduler._grid.selectEvent(n,t,r),!1):!0});scheduler.attachEvent("onSchedulerResize",function(){return this._mode==t?(this[t+"_view"](!0),window.setTimeout(function(){scheduler.callEvent("onAfterSchedulerResize",[])},1),!1):!0});n=scheduler.render_data;scheduler.render_data=function(){if(this._mode==t)scheduler._grid._fill_grid_tab(i);else return n.apply(this,arguments)};r=scheduler.render_view_data;scheduler.render_view_data=function(){return this._mode==t?(scheduler._grid._gridScrollTop=scheduler._els.dhx_cal_data[0].childNodes[0].scrollTop,scheduler._els.dhx_cal_data[0].childNodes[0].scrollTop=0,scheduler._els.dhx_cal_data[0].style.overflowY="auto"):scheduler._els.dhx_cal_data[0].style.overflowY="auto",r.apply(this,arguments)}});scheduler[t+"_view"]=function(n){var f;if(n){var r=null,u=null,e=scheduler[i];e.paging?(r=scheduler.date[t+"_start"](new Date(scheduler._date)),u=scheduler.date["add_"+t](r,1)):(r=scheduler.config[t+"_start"],u=scheduler.config[t+"_end"]);scheduler._min_date=r;scheduler._max_date=u;scheduler._grid.set_full_view(i);f="";+r>+new Date(0)&&+u<+new Date(9999,1,1)&&(f=scheduler.templates[t+"_date"](r,u));scheduler._els.dhx_cal_date[0].innerHTML=f;scheduler._gridView=i}else scheduler._grid._sort_marker=null,delete scheduler._gridView,scheduler._rendered=[],scheduler[i]._selected_divs=[]}};scheduler.dblclick_dhx_grid_area=function(){!this.config.readonly&&this.config.dblclick_create&&this.addEventNow()};scheduler._click.dhx_cal_header&&(scheduler._old_header_click=scheduler._click.dhx_cal_header);scheduler._click.dhx_cal_header=function(n){if(scheduler._gridView){var t=n||window.event,i=scheduler._grid.get_sort_params(t,scheduler._gridView);scheduler._grid.draw_sort_marker(t.originalTarget||t.srcElement,i.dir);scheduler.clear_view();scheduler._grid._fill_grid_tab(scheduler._gridView,i)}else if(scheduler._old_header_click)return scheduler._old_header_click.apply(this,arguments)};scheduler._grid.selectEvent=function(n,t,i){if(scheduler.callEvent("onBeforeRowSelect",[n,i])){var r=scheduler._grid._getObjName(t);scheduler.for_rendered(n,function(n){n.className+=" dhx_grid_event_selected";scheduler[r]._selected_divs.push(n)});scheduler._select_id=n}};scheduler._grid._unselectDiv=function(n){n.className=n.className.replace(/ dhx_grid_event_selected/,"")};scheduler._grid.unselectEvent=function(n,t){var r=scheduler._grid._getObjName(t),i;if(r&&scheduler[r]._selected_divs)if(n){for(i=0;i<scheduler[r]._selected_divs.length;i++)if(scheduler[r]._selected_divs[i].getAttribute("event_id")==n){scheduler._grid._unselectDiv(scheduler[r]._selected_divs[i]);scheduler[r]._selected_divs.slice(i,1);break}}else{for(i=0;i<scheduler[r]._selected_divs.length;i++)scheduler._grid._unselectDiv(scheduler[r]._selected_divs[i]);scheduler[r]._selected_divs=[]}};scheduler._grid.get_sort_params=function(n,t){var i=n.originalTarget||n.srcElement,s="desc",r,u,e,h,o,f;for(i.className=="dhx_grid_view_sort"&&(i=i.parentNode),i.className&&i.className.indexOf("dhx_grid_sort_asc")!=-1||(s="asc"),r=0,u=0;u<i.parentNode.childNodes.length;u++)if(i.parentNode.childNodes[u]==i){r=u;break}return e=null,scheduler[t].columns[r].template?(h=scheduler[t].columns[r].template,e=function(n){return h(n.start_date,n.end_date,n)}):(o=scheduler[t].columns[r].id,o=="date"&&(o="start_date"),e=function(n){return n[o]}),f=scheduler[t].columns[r].sort,typeof f!="function"&&(f=scheduler._grid.sort_rules[f]||scheduler._grid.sort_rules.str),{dir:s,value:e,rule:f}};scheduler._grid.draw_sort_marker=function(n,t){n.className=="dhx_grid_view_sort"&&(n=n.parentNode);scheduler._grid._sort_marker&&(scheduler._grid._sort_marker.className=scheduler._grid._sort_marker.className.replace(/( )?dhx_grid_sort_(asc|desc)/,""),scheduler._grid._sort_marker.removeChild(scheduler._grid._sort_marker.lastChild));n.className+=" dhx_grid_sort_"+t;scheduler._grid._sort_marker=n;var i="<div class='dhx_grid_view_sort' style='left:"+(+n.style.width.replace("px","")+1-6+n.offsetLeft)+"px'>&nbsp;<\/div>";n.innerHTML+=i};scheduler._grid.sort_grid=function(n){var n=n||{dir:"desc",value:function(n){return n.start_date},rule:scheduler._grid.sort_rules.date},t=scheduler.get_visible_events();return n.dir=="desc"?t.sort(function(t,i){return n.rule(t,i,n.value)}):t.sort(function(t,i){return-n.rule(t,i,n.value)}),t};scheduler._grid.set_full_view=function(n){if(n){var i=scheduler.locale.labels,t=scheduler._grid._print_grid_header(n);scheduler._els.dhx_cal_header[0].innerHTML=t;scheduler._table_view=!0;scheduler.set_sizes()}};scheduler._grid._calcPadding=function(n,t){return(n.paddingLeft!==undefined?1*n.paddingLeft:scheduler[t].defPadding)+(n.paddingRight!==undefined?1*n.paddingRight:scheduler[t].defPadding)};scheduler._grid._getStyles=function(n,t){for(var i=[],r="",u=0;t[u];u++){r=t[u]+":";switch(t[u]){case"text-align":n.align&&i.push(r+n.align);break;case"vertical-align":n.valign&&i.push(r+n.valign);break;case"padding-left":n.paddingLeft!==undefined&&i.push(r+(n.paddingLeft||"0")+"px");break;case"padding-right":n.paddingRight!==undefined&&i.push(r+(n.paddingRight||"0")+"px")}}return i};scheduler._grid._fill_grid_tab=function(n,t){for(var s,f,h=scheduler._date,e=scheduler._grid.sort_grid(t),u=scheduler[n].columns,r="<div>",o=-2,i=0;i<u.length;i++)s=scheduler._grid._calcPadding(u[i],n),o+=u[i].width+s,i<u.length-1&&(r+="<div class='dhx_grid_v_border' style='left:"+o+"px'><\/div>");for(r+="<\/div>",r+="<div class='dhx_grid_area'><table>",i=0;i<e.length;i++)r+=scheduler._grid._print_event_row(e[i],n);for(r+="<\/table><\/div>",scheduler._els.dhx_cal_data[0].innerHTML=r,scheduler._els.dhx_cal_data[0].scrollTop=scheduler._grid._gridScrollTop||0,f=scheduler._els.dhx_cal_data[0].getElementsByTagName("tr"),scheduler._rendered=[],i=0;i<f.length;i++)scheduler._rendered[i]=f[i]};scheduler._grid._print_event_row=function(n,t){var u=[],f,i,h,c,l;n.color&&u.push("background:"+n.color);n.textColor&&u.push("color:"+n.textColor);n._text_style&&u.push(n._text_style);scheduler[t].rowHeight&&u.push("height:"+scheduler[t].rowHeight+"px");f="";u.length&&(f="style='"+u.join(";")+"'");var r=scheduler[t].columns,o=scheduler.templates.event_class(n.start_date,n.end_date,n),s="<tr class='dhx_grid_event"+(o?" "+o:"")+"' event_id='"+n.id+"' "+f+">",e=scheduler._grid._getViewName(t),a=["text-align","vertical-align","padding-left","padding-right"];for(i=0;i<r.length;i++)h=r[i].template?r[i].template(n.start_date,n.end_date,n):r[i].id=="date"?scheduler.templates[e+"_full_date"](n.start_date,n.end_date,n):r[i].id=="start_date"||r[i].id=="end_date"?scheduler.templates[e+"_single_date"](n[r[i].id]):scheduler.templates[e+"_field"](r[i].id,n),c=scheduler._grid._getStyles(r[i],a),l=r[i].css?' class="'+r[i].css+'"':"",s+="<td style='padding-left: 4px;padding-right: 4px; overflow: hidden;width:"+(r[i].width+8)+"px;"+c.join(";")+"' "+l+">"+h+"<\/td>";return s+"<td class='dhx_grid_dummy'><\/td><\/tr>"};scheduler._grid._print_grid_header=function(n){for(var f,h,c,i,l,a,e="<div class='dhx_grid_line'>",t=scheduler[n].columns,u=[],o=t.length,s=scheduler._obj.clientWidth-2*t.length-20,r=0;r<t.length;r++)f=t[r].initialWidth*1,isNaN(f)||t[r].initialWidth===""||t[r].initialWidth===null||typeof t[r].initialWidth=="boolean"?u[r]=null:(o--,s-=f,u[r]=f);for(h=Math.floor(s/o),c=["text-align","padding-left","padding-right"],i=0;i<t.length;i++)l=u[i]?u[i]:h,t[i].width=l-scheduler._grid._calcPadding(t[i],n),a=scheduler._grid._getStyles("center",c),e+="<div style='width:"+(t[i].width+7)+"px;"+a.join(";")+"'>"+(t[i].label===undefined?t[i].id:t[i].label)+"<\/div>";return e+"<\/div>"}
if (typeof (Sys) !== 'undefined') { Sys.Application.notifyScriptLoaded() };