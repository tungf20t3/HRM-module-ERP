function str_obj(n){var i,t,r;for(n=n.split(","),i={},t=0;t<n.length;t++)r=n[t].split("="),i[r[0]]=r[1];return i}function nonce(){for(var n="",t="abcdefghijklmnopqrstuvwxyz0123456789",i=0;i<16;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function ie_getCertificate(){var n,r,t,u,i;try{return n={type:[],lang:[],nonce:[],src:[],origin:[],tab:[]},n.type="CERT",n.lang="en",n.nonce=nonce(),n.src="page.js",n.origin="0",n.tab="1",r=JSON.stringify(n),document.TOKENSIGN.MyParam=r,i=document.TOKENSIGN.Open()}catch(f){return t=f.message,t=t.replace(/(\r\n|\n|\r)/gm,""),u='{"message" : "'+t+'", "result" : "technical_error"}',i=Base64.encode(u),i}}function ie_showCertificate(n){var t,u,i,f,r;try{return t={type:[],lang:[],nonce:[],src:[],origin:[],cert:[],tab:[]},t.type="SHOWCER",t.lang="en",t.nonce=nonce(),t.src="page.js",t.origin="0",t.cert=n.cert,t.tab="1",u=JSON.stringify(t),document.TOKENSIGN.MyParam=u,r=document.TOKENSIGN.Open()}catch(e){return i=e.message,i=i.replace(/(\r\n|\n|\r)/gm,""),f='{"message" : "'+i+'", "result" : "technical_error"}',r=Base64.encode(f),r}}function ie_signHashData(n,t){var i,f,r,e,u;try{return i={type:[],lang:[],nonce:[],src:[],origin:[],tab:[],hashtype:[],cert:[],hash:[]},i.type="SIGN",i.lang="en",i.hashtype=t.type,i.cert=n,i.nonce=nonce(),i.hash=t.hex,i.src="page.js",i.origin="0",i.tab="1",f=JSON.stringify(i),document.TOKENSIGN.MyParam=f,u=document.TOKENSIGN.Open()}catch(o){return r=o.message,r=r.replace(/(\r\n|\n|\r)/gm,""),e='{"message" : "'+r+'", "result" : "technical_error"}',u=Base64.encode(e),u}}function ie_signXMLData(n){var t,u,i,f,r;try{return t={type:[],lang:[],nonce:[],src:[],origin:[],tab:[],hashtype:[],cert:[],hash:[]},t.type="SIGN",t.lang="en",t.hashtype=n.hashtype,t.cert="",t.nonce=nonce(),t.hash=n.hex,t.src="page.js",t.origin="0",t.tab="1",u=JSON.stringify(t),document.TOKENSIGN.MyParam=u,r=document.TOKENSIGN.Open()}catch(e){return i=e.message,i=i.replace(/(\r\n|\n|\r)/gm,""),f='{"message" : "'+i+'", "result" : "technical_error"}',r=Base64.encode(f),r}}function ie_signMultiXMLData(n,t){var i,f,r,e,u;try{return i={type:[],lang:[],nonce:[],src:[],origin:[],tab:[],hashtype:[],cert:[],hash:[]},i.type="SIGN",i.lang="en",i.hashtype=t.hashtype,i.cert=t.cer,i.nonce=nonce(),i.hash=n,i.src="page.js",i.origin="0",i.tab="1",f=JSON.stringify(i),document.TOKENSIGN.MyParam=f,u=document.TOKENSIGN.Open()}catch(o){return r=o.message,r=r.replace(/(\r\n|\n|\r)/gm,""),e='{"message" : "'+r+'", "result" : "technical_error"}',u=Base64.encode(e),u}}function ie_doCryptoFunction(n,t,i,r){var u,h,e,f,c,o,y,l;try{var a="",s="",v="";if(i&&(v=i.constructor===Array?i[0]:i),u={type:[],lang:[],nonce:[],src:[],origin:[],tab:[],uplink:[],downlink:[]},u.type=n,u.lang=r.lang,u.nonce=nonce(),u.src="page.js",u.origin="0",u.tab="1",u.uplink=t,u.downlink=i,h=document.TOKENSIGN.getCookies(v),h!==""){for(e=h.split("#"),f=0;f<e.length;f++)s+=JSON.stringify(str_obj(e[f])),f!==e.length-1&&(s+="#");c=s.replaceAll('"','\\"').replaceAll(" ","");c&&(u.cookie=c)}return a=JSON.stringify(u),document.TOKENSIGN.MyParam=a,l=document.TOKENSIGN.Open()}catch(p){return o=p.message,o=o.replace(/(\r\n|\n|\r)/gm,""),y='{"message" : "'+o+'", "result" : "technical_error"}',l=Base64.encode(y),l}}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){var f="",e,t,i,s,h,o,r,u=0;for(n=Base64._utf8_encode(n);u<n.length;)e=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),s=e>>2,h=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),f=f+this._keyStr.charAt(s)+this._keyStr.charAt(h)+this._keyStr.charAt(o)+this._keyStr.charAt(r);return f},decode:function(n){var t="",e,o,s,h,u,r,f,i=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)h=this._keyStr.indexOf(n.charAt(i++)),u=this._keyStr.indexOf(n.charAt(i++)),r=this._keyStr.indexOf(n.charAt(i++)),f=this._keyStr.indexOf(n.charAt(i++)),e=h<<2|u>>4,o=(u&15)<<4|r>>2,s=(r&3)<<6|f,t=t+String.fromCharCode(e),r!=64&&(t=t+String.fromCharCode(o)),f!=64&&(t=t+String.fromCharCode(s));return Base64._utf8_decode(t)},_utf8_encode:function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},_utf8_decode:function(n){for(var r="",t=0,i=0,u=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(u=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|u&63),t+=2):(u=n.charCodeAt(t+1),c3=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(u&63)<<6|c3&63),t+=3);return r}};String.prototype.replaceAll=function(n,t){var i=this;return i.split(n).join(t)}