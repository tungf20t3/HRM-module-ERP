/*! html2canvas */
!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self);t.html2canvas=n()}}(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(t,i,r){(function(t){
/*! http://mths.be/punycode v1.2.4 by @mathias */
    (function (u) { function s(n) { throw RangeError(vt[n]); } function nt(n, t) { for (var i = n.length; i--;)n[i] = t(n[i]); return n } function tt(n, t) { return nt(n.split(at), t).join(".") } function it(n) { for (var r = [], i = 0, f = n.length, t, u; i < f;)t = n.charCodeAt(i++), t >= 55296 && t <= 56319 && i < f ? (u = n.charCodeAt(i++), (u & 64512) == 56320 ? r.push(((t & 1023) << 10) + (u & 1023) + 65536) : (r.push(t), i--)) : r.push(t); return r } function rt(n) { return nt(n, function (n) { var t = ""; return n > 65535 && (n -= 65536, t += a(n >>> 10 & 1023 | 55296), n = 56320 | n & 1023), t + a(n) }).join("") } function yt(n) { return n - 48 < 10 ? n - 22 : n - 65 < 26 ? n - 65 : n - 97 < 26 ? n - 97 : f } function ut(n, t) { return n + 22 + 75 * (n < 26) - ((t != 0) << 5) } function ft(n, t, i) { var r = 0; for (n = i ? e(n / ht) : n >> 1, n += e(n / t); n > w * l >> 1; r += f)n = e(n / w); return e(r + (w + 1) * n / (n + st)) } function et(n) { var v = [], ut = n.length, r, t = 0, b = d, y = k, i, u, w, nt, o, c, a, tt, it; for (i = n.lastIndexOf(g), i < 0 && (i = 0), u = 0; u < i; ++u)n.charCodeAt(u) >= 128 && s("not-basic"), v.push(n.charCodeAt(u)); for (w = i > 0 ? i + 1 : 0; w < ut;) { for (nt = t, o = 1, c = f; ; c += f) { if (w >= ut && s("invalid-input"), a = yt(n.charCodeAt(w++)), (a >= f || a > e((h - t) / o)) && s("overflow"), t += a * o, tt = c <= y ? p : c >= y + l ? l : c - y, a < tt) break; it = f - tt; o > e(h / it) && s("overflow"); o *= it } r = v.length + 1; y = ft(t - nt, r, nt == 0); e(t / r) > h - b && s("overflow"); b += e(t / r); t %= r; v.splice(t++, 0, b) } return rt(v) } function ot(n) { var r, u, v, et, y, t, o, w, b, nt, i, c = [], tt, rt, ot, st; for (n = it(n), tt = n.length, r = d, u = 0, y = k, t = 0; t < tt; ++t)i = n[t], i < 128 && c.push(a(i)); for (v = et = c.length, et && c.push(g); v < tt;) { for (o = h, t = 0; t < tt; ++t)i = n[t], i >= r && i < o && (o = i); for (rt = v + 1, o - r > e((h - u) / rt) && s("overflow"), u += (o - r) * rt, r = o, t = 0; t < tt; ++t)if (i = n[t], i < r && ++u > h && s("overflow"), i == r) { for (w = u, b = f; ; b += f) { if (nt = b <= y ? p : b >= y + l ? l : b - y, w < nt) break; st = w - nt; ot = f - nt; c.push(a(ut(nt + st % ot, 0))); w = e(st / ot) } c.push(a(ut(w, 0))); y = ft(u, rt, v == et); u = 0; ++v } ++u; ++r } return c.join("") } function pt(n) { return tt(n, function (n) { return ct.test(n) ? et(n.slice(4).toLowerCase()) : n }) } function wt(n) { return tt(n, function (n) { return lt.test(n) ? "xn--" + ot(n) : n }) } var v = typeof r == "object" && r, b = typeof i == "object" && i && i.exports == v && i, c = typeof t == "object" && t; (c.global === c || c.window === c) && (u = c); var o, h = 2147483647, f = 36, p = 1, l = 26, st = 38, ht = 700, k = 72, d = 128, g = "-", ct = /^xn--/, lt = /[^ -~]/, at = /\x2E|\u3002|\uFF0E|\uFF61/g, vt = { overflow: "Overflow: input needs wider integers to process", "not-basic": "Illegal input >= 0x80 (not a basic code point)", "invalid-input": "Invalid input" }, w = f - p, e = Math.floor, a = String.fromCharCode, y; if (o = { version: "1.2.4", ucs2: { decode: it, encode: rt }, decode: et, encode: ot, toASCII: wt, toUnicode: pt }, typeof n == "function" && typeof n.amd == "object" && n.amd) n("punycode", function () { return o }); else if (v && !v.nodeType) if (b) b.exports = o; else for (y in o) o.hasOwnProperty(y) && (v[y] = o[y]); else u.punycode = o })(this)
}).call(this, typeof global != "undefined" ? global : typeof self != "undefined" ? self : typeof window != "undefined" ? window : {})
}, {}], 2: [function (n, t) { function f(n, t, i) { n.defaultView && (t !== n.defaultView.pageXOffset || i !== n.defaultView.pageYOffset) && n.defaultView.scrollTo(t, i) } function e(n, t) { try { t && (t.width = n.width, t.height = n.height, t.getContext("2d").putImageData(n.getContext("2d").getImageData(0, 0, n.width, n.height), 0, 0)) } catch (i) { u("Unable to copy canvas content from", n, i) } } function i(n, t) { for (var r = n.nodeType === 3 ? document.createTextNode(n.nodeValue) : n.cloneNode(!1), u = n.firstChild; u;)(t === !0 || u.nodeType !== 1 || u.nodeName !== "SCRIPT") && r.appendChild(i(u, t)), u = u.nextSibling; return n.nodeType === 1 && (r._scrollTop = n.scrollTop, r._scrollLeft = n.scrollLeft, n.nodeName === "CANVAS" ? e(n, r) : (n.nodeName === "TEXTAREA" || n.nodeName === "SELECT") && (r.value = n.value)), r } function r(n) { if (n.nodeType === 1) { n.scrollTop = n._scrollTop; n.scrollLeft = n._scrollLeft; for (var t = n.firstChild; t;)r(t), t = t.nextSibling } } var u = n("./log"); t.exports = function (n, t, u, e, o, s, h) { var l = i(n.documentElement, o.javascriptEnabled), c = t.createElement("iframe"); return c.className = "html2canvas-container", c.style.visibility = "hidden", c.style.position = "fixed", c.style.left = "-10000px", c.style.top = "0px", c.style.border = "0", c.width = u, c.height = e, c.scrolling = "no", t.body.appendChild(c), new Promise(function (t) { var i = c.contentWindow.document; c.contentWindow.onload = c.onload = function () { var n = setInterval(function () { i.body.childNodes.length > 0 && (r(i.documentElement), clearInterval(n), o.type === "view" && (c.contentWindow.scrollTo(s, h), /(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (c.contentWindow.scrollY !== h || c.contentWindow.scrollX !== s) && (i.documentElement.style.top = -h + "px", i.documentElement.style.left = -s + "px", i.documentElement.style.position = "absolute")), t(c)) }, 50) }; i.open(); i.write("<!DOCTYPE html><html><\/html>"); f(n, s, h); i.replaceChild(i.adoptNode(l), i.documentElement); i.close() }) } }, { "./log": 13 }], 3: [function (n, t) { function i(n) { this.r = 0; this.g = 0; this.b = 0; this.a = null; var t = this.fromArray(n) || this.namedColor(n) || this.rgb(n) || this.rgba(n) || this.hex6(n) || this.hex3(n) } var r, u, f, e, o; i.prototype.darken = function (n) { var t = 1 - n; return new i([Math.round(this.r * t), Math.round(this.g * t), Math.round(this.b * t), this.a]) }; i.prototype.isTransparent = function () { return this.a === 0 }; i.prototype.isBlack = function () { return this.r === 0 && this.g === 0 && this.b === 0 }; i.prototype.fromArray = function (n) { return Array.isArray(n) && (this.r = Math.min(n[0], 255), this.g = Math.min(n[1], 255), this.b = Math.min(n[2], 255), n.length > 3 && (this.a = n[3])), Array.isArray(n) }; r = /^#([a-f0-9]{3})$/i; i.prototype.hex3 = function (n) { var t = null; return (t = n.match(r)) !== null && (this.r = parseInt(t[1][0] + t[1][0], 16), this.g = parseInt(t[1][1] + t[1][1], 16), this.b = parseInt(t[1][2] + t[1][2], 16)), t !== null }; u = /^#([a-f0-9]{6})$/i; i.prototype.hex6 = function (n) { var t = null; return (t = n.match(u)) !== null && (this.r = parseInt(t[1].substring(0, 2), 16), this.g = parseInt(t[1].substring(2, 4), 16), this.b = parseInt(t[1].substring(4, 6), 16)), t !== null }; f = /^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/; i.prototype.rgb = function (n) { var t = null; return (t = n.match(f)) !== null && (this.r = Number(t[1]), this.g = Number(t[2]), this.b = Number(t[3])), t !== null }; e = /^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/; i.prototype.rgba = function (n) { var t = null; return (t = n.match(e)) !== null && (this.r = Number(t[1]), this.g = Number(t[2]), this.b = Number(t[3]), this.a = Number(t[4])), t !== null }; i.prototype.toString = function () { return this.a !== null && this.a !== 1 ? "rgba(" + [this.r, this.g, this.b, this.a].join(",") + ")" : "rgb(" + [this.r, this.g, this.b].join(",") + ")" }; i.prototype.namedColor = function (n) { n = n.toLowerCase(); var t = o[n]; if (t) this.r = t[0], this.g = t[1], this.b = t[2]; else if (n === "transparent") return this.r = this.g = this.b = this.a = 0, !0; return !!t }; i.prototype.isColor = !0; o = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] }; t.exports = i }, {}], 4: [function (t, i) { function u(n, t) { var u = k++, f, o, i; return (t = t || {}, t.logging && (r.options.logging = !0, r.options.start = Date.now()), t.async = typeof t.async == "undefined" ? !0 : t.async, t.allowTaint = typeof t.allowTaint == "undefined" ? !1 : t.allowTaint, t.removeContainer = typeof t.removeContainer == "undefined" ? !0 : t.removeContainer, t.javascriptEnabled = typeof t.javascriptEnabled == "undefined" ? !1 : t.javascriptEnabled, t.imageTimeout = typeof t.imageTimeout == "undefined" ? 1e4 : t.imageTimeout, t.renderer = typeof t.renderer == "function" ? t.renderer : e, t.strict = !!t.strict, typeof n == "string") ? typeof t.proxy != "string" ? Promise.reject("Proxy must be used when rendering url") : (f = t.width != null ? t.width : window.innerWidth, o = t.height != null ? t.height : window.innerHeight, w(it(n), t.proxy, document, f, o, t).then(function (n) { return h(n.contentWindow.document.documentElement, n, t, f, o) })) : (i = (n === undefined ? [document.documentElement] : n.length ? n : [n])[0], i.setAttribute(s + u, u), d(i.ownerDocument, t, i.ownerDocument.defaultView.innerWidth, i.ownerDocument.defaultView.innerHeight, u).then(function (n) { if (typeof t.onrendered == "function") { r("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"); t.onrendered(n) } return n })) } function d(n, t, i, u, f) { return p(n, n, i, u, t, n.defaultView.pageXOffset, n.defaultView.pageYOffset).then(function (e) { var o, c; r("Document cloned"); o = s + f; c = "[" + o + "='" + f + "']"; n.querySelector(c).removeAttribute(o); var l = e.contentWindow, a = l.document.querySelector(c), v = typeof t.onclone == "function" ? Promise.resolve(t.onclone(l.document)) : Promise.resolve(!0); return v.then(function () { return h(a, e, t, i, u) }) }) } function h(n, t, i, u, f) { var o = t.contentWindow, h = new l(o.document), y = new a(i, h), s = b(n), p = i.type === "view" ? u : nt(o.document), w = i.type === "view" ? f : tt(o.document), e = new i.renderer(p, w, y, i, document), k = new v(n, e, h, y, i); return k.ready.then(function () { r("Finished rendering"); var u; return u = i.type === "view" ? c(e.canvas, { width: e.canvas.width, height: e.canvas.height, top: 0, left: 0, x: 0, y: 0 }) : n === o.document.body || n === o.document.documentElement || i.canvas != null ? e.canvas : c(e.canvas, { width: i.width != null ? i.width : s.width, height: i.height != null ? i.height : s.height, top: s.top, left: s.left, x: 0, y: 0 }), g(t, i), u }) } function g(n, t) { t.removeContainer && (n.parentNode.removeChild(n), r("Cleaned up container")) } function c(n, t) { var i = document.createElement("canvas"), e = Math.min(n.width - 1, Math.max(0, t.left)), s = Math.min(n.width, Math.max(1, t.left + t.width)), o = Math.min(n.height - 1, Math.max(0, t.top)), h = Math.min(n.height, Math.max(1, t.top + t.height)), u, f; return i.width = t.width, i.height = t.height, u = s - e, f = h - o, r("Cropping canvas at:", "left:", t.left, "top:", t.top, "width:", u, "height:", f), r("Resulting crop with width", t.width, "and height", t.height, "with x", e, "and y", o), i.getContext("2d").drawImage(n, e, o, u, f, t.x, t.y, u, f), i } function nt(n) { return Math.max(Math.max(n.body.scrollWidth, n.documentElement.scrollWidth), Math.max(n.body.offsetWidth, n.documentElement.offsetWidth), Math.max(n.body.clientWidth, n.documentElement.clientWidth)) } function tt(n) { return Math.max(Math.max(n.body.scrollHeight, n.documentElement.scrollHeight), Math.max(n.body.offsetHeight, n.documentElement.offsetHeight), Math.max(n.body.clientHeight, n.documentElement.clientHeight)) } function it(n) { var t = document.createElement("a"); return t.href = n, t.href = t.href, t } var l = t("./support"), e = t("./renderers/canvas"), a = t("./imageloader"), v = t("./nodeparser"), y = t("./nodecontainer"), r = t("./log"), o = t("./utils"), p = t("./clone"), w = t("./proxy").loadUrlDocument, b = o.getBounds, s = "data-html2canvas-node", k = 0, f; u.CanvasRenderer = e; u.NodeContainer = y; u.log = r; u.utils = o; f = typeof document == "undefined" || typeof Object.create != "function" || typeof document.createElement("canvas").getContext != "function" ? function () { return Promise.reject("No canvas support") } : u; i.exports = f; typeof n == "function" && n.amd && n("html2canvas", [], function () { return f }) }, { "./clone": 2, "./imageloader": 11, "./log": 13, "./nodecontainer": 14, "./nodeparser": 15, "./proxy": 16, "./renderers/canvas": 20, "./support": 22, "./utils": 26 }], 5: [function (n, t) { function i(n) { if (this.src = n, r("DummyImageContainer for", n), !this.promise || !this.image) { r("Initiating DummyImageContainer"); i.prototype.image = new Image; var t = this.image; i.prototype.promise = new Promise(function (n, i) { t.onload = n; t.onerror = i; t.src = u(); t.complete === !0 && n(t) }) } } var r = n("./log"), u = n("./utils").smallImage; t.exports = i }, { "./log": 13, "./utils": 26 }], 6: [function (n, t) { function r(n, t) { var r = document.createElement("div"), u = document.createElement("img"), f = document.createElement("span"), e = "Hidden Text", o, s; r.style.visibility = "hidden"; r.style.fontFamily = n; r.style.fontSize = t; r.style.margin = 0; r.style.padding = 0; document.body.appendChild(r); u.src = i(); u.width = 1; u.height = 1; u.style.margin = 0; u.style.padding = 0; u.style.verticalAlign = "baseline"; f.style.fontFamily = n; f.style.fontSize = t; f.style.margin = 0; f.style.padding = 0; f.appendChild(document.createTextNode(e)); r.appendChild(f); r.appendChild(u); o = u.offsetTop - f.offsetTop + 1; r.removeChild(f); r.appendChild(document.createTextNode(e)); r.style.lineHeight = "normal"; u.style.verticalAlign = "super"; s = u.offsetTop - r.offsetTop + 1; document.body.removeChild(r); this.baseline = o; this.lineWidth = 1; this.middle = s } var i = n("./utils").smallImage; t.exports = r }, { "./utils": 26 }], 7: [function (n, t) { function i() { this.data = {} } var r = n("./font"); i.prototype.getMetrics = function (n, t) { return this.data[n + "-" + t] === undefined && (this.data[n + "-" + t] = new r(n, t)), this.data[n + "-" + t] }; t.exports = i }, { "./font": 6 }], 8: [function (n, t) { function i(t, i, r) { this.image = null; this.src = t; var f = this, e = u(t); this.promise = (i ? new Promise(function (n) { t.contentWindow.document.URL === "about:blank" || t.contentWindow.document.documentElement == null ? t.contentWindow.onload = t.onload = function () { n(t) } : n(t) }) : this.proxyLoad(r.proxy, e, r)).then(function (t) { var i = n("./core"); return i(t.contentWindow.document.documentElement, { type: "view", width: t.width, height: t.height, proxy: r.proxy, javascriptEnabled: r.javascriptEnabled, removeContainer: r.removeContainer, allowTaint: r.allowTaint, imageTimeout: r.imageTimeout / 2 }) }).then(function (n) { return f.image = n }) } var r = n("./utils"), u = r.getBounds, f = n("./proxy").loadUrlDocument; i.prototype.proxyLoad = function (n, t, i) { var r = this.src; return f(r.src, n, r.ownerDocument, t.width, t.height, i) }; t.exports = i }, { "./core": 4, "./proxy": 16, "./utils": 26 }], 9: [function (n, t) { function i(n) { this.src = n.value; this.colorStops = []; this.type = null; this.x0 = .5; this.y0 = .5; this.x1 = .5; this.y1 = .5; this.promise = Promise.resolve(!0) } i.TYPES = { LINEAR: 1, RADIAL: 2 }; i.REGEXP_COLORSTOP = /^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i; t.exports = i }, {}], 10: [function (n, t) { function i(n, t) { this.src = n; this.image = new Image; var i = this; this.tainted = null; this.promise = new Promise(function (r, u) { i.image.onload = r; i.image.onerror = u; t && (i.image.crossOrigin = "anonymous"); i.image.src = n; i.image.complete === !0 && r(i.image) }) } t.exports = i }, {}], 11: [function (n, t) { function i(n, t) { this.link = null; this.options = n; this.support = t; this.origin = this.getOrigin(window.location.href) } var r = n("./log"), u = n("./imagecontainer"), f = n("./dummyimagecontainer"), o = n("./proxyimagecontainer"), s = n("./framecontainer"), e = n("./svgcontainer"), h = n("./svgnodecontainer"), c = n("./lineargradientcontainer"), l = n("./webkitgradientcontainer"), a = n("./utils").bind; i.prototype.findImages = function (n) { var t = []; return n.reduce(function (n, t) { switch (t.node.nodeName) { case "IMG": return n.concat([{ args: [t.node.src], method: "url" }]); case "svg": case "IFRAME": return n.concat([{ args: [t.node], method: t.node.nodeName }]) }return n }, []).forEach(this.addImage(t, this.loadImage), this), t }; i.prototype.findBackgroundImage = function (n, t) { return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(n, this.loadImage), this), n }; i.prototype.addImage = function (n, t) { return function (i) { i.args.forEach(function (u) { this.imageExists(n, u) || (n.splice(0, 0, t.call(this, i)), r("Added image #" + n.length, typeof u == "string" ? u.substring(0, 100) : u)) }, this) } }; i.prototype.hasImageBackground = function (n) { return n.method !== "none" }; i.prototype.loadImage = function (n) { if (n.method === "url") { var t = n.args[0]; return !this.isSVG(t) || this.support.svg || this.options.allowTaint ? t.match(/data:image\/.*;base64,/i) ? new u(t.replace(/url\(['"]{0,}|['"]{0,}\)$/ig, ""), !1) : this.isSameOrigin(t) || this.options.allowTaint === !0 || this.isSVG(t) ? new u(t, !1) : this.support.cors && !this.options.allowTaint && this.options.useCORS ? new u(t, !0) : this.options.proxy ? new o(t, this.options.proxy) : new f(t) : new e(t) } return n.method === "linear-gradient" ? new c(n) : n.method === "gradient" ? new l(n) : n.method === "svg" ? new h(n.args[0], this.support.svg) : n.method === "IFRAME" ? new s(n.args[0], this.isSameOrigin(n.args[0].src), this.options) : new f(n) }; i.prototype.isSVG = function (n) { return n.substring(n.length - 3).toLowerCase() === "svg" || e.prototype.isInline(n) }; i.prototype.imageExists = function (n, t) { return n.some(function (n) { return n.src === t }) }; i.prototype.isSameOrigin = function (n) { return this.getOrigin(n) === this.origin }; i.prototype.getOrigin = function (n) { var t = this.link || (this.link = document.createElement("a")); return t.href = n, t.href = t.href, t.protocol + t.hostname + t.port }; i.prototype.getPromise = function (n) { return this.timeout(n, this.options.imageTimeout)["catch"](function () { var t = new f(n.src); return t.promise.then(function (t) { n.image = t }) }) }; i.prototype.get = function (n) { var t = null; return this.images.some(function (i) { return (t = i).src === n }) ? t : null }; i.prototype.fetch = function (n) { return this.images = n.reduce(a(this.findBackgroundImage, this), this.findImages(n)), this.images.forEach(function (n, t) { n.promise.then(function () { r("Succesfully loaded image #" + (t + 1), n) }, function (i) { r("Failed loading image #" + (t + 1), n, i) }) }), this.ready = Promise.all(this.images.map(this.getPromise, this)), r("Finished searching images"), this }; i.prototype.timeout = function (n, t) { var i, u = Promise.race([n.promise, new Promise(function (u, f) { i = setTimeout(function () { r("Timed out loading image", n); f(n) }, t) })]).then(function (n) { return clearTimeout(i), n }); return u["catch"](function () { clearTimeout(i) }), u }; t.exports = i }, { "./dummyimagecontainer": 5, "./framecontainer": 8, "./imagecontainer": 10, "./lineargradientcontainer": 12, "./log": 13, "./proxyimagecontainer": 17, "./svgcontainer": 23, "./svgnodecontainer": 24, "./utils": 26, "./webkitgradientcontainer": 27 }], 12: [function (n, t) { function r(n) { i.apply(this, arguments); this.type = i.TYPES.LINEAR; var t = r.REGEXP_DIRECTION.test(n.args[0]) || !i.REGEXP_COLORSTOP.test(n.args[0]); t ? n.args[0].split(/\s+/).reverse().forEach(function (n, t) { var r, u, i; switch (n) { case "left": this.x0 = 0; this.x1 = 1; break; case "top": this.y0 = 0; this.y1 = 1; break; case "right": this.x0 = 1; this.x1 = 0; break; case "bottom": this.y0 = 1; this.y1 = 0; break; case "to": r = this.y0; u = this.x0; this.y0 = this.y1; this.x0 = this.x1; this.x1 = u; this.y1 = r; break; case "center": break; default: if (i = parseFloat(n, 10) * .01, isNaN(i)) break; t === 0 ? (this.y0 = i, this.y1 = 1 - this.y0) : (this.x0 = i, this.x1 = 1 - this.x0) } }, this) : (this.y0 = 0, this.y1 = 1); this.colorStops = n.args.slice(t ? 1 : 0).map(function (n) { var t = n.match(i.REGEXP_COLORSTOP), r = +t[2], f = r === 0 ? "%" : t[3]; return { color: new u(t[1]), stop: f === "%" ? r / 100 : null } }); this.colorStops[0].stop === null && (this.colorStops[0].stop = 0); this.colorStops[this.colorStops.length - 1].stop === null && (this.colorStops[this.colorStops.length - 1].stop = 1); this.colorStops.forEach(function (n, t) { n.stop === null && this.colorStops.slice(t).some(function (i, r) { return i.stop !== null ? (n.stop = (i.stop - this.colorStops[t - 1].stop) / (r + 1) + this.colorStops[t - 1].stop, !0) : !1 }, this) }, this) } var i = n("./gradientcontainer"), u = n("./color"); r.prototype = Object.create(i.prototype); r.REGEXP_DIRECTION = /^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i; t.exports = r }, { "./color": 3, "./gradientcontainer": 9 }], 13: [function (n, t) { var i = function () { i.options.logging && window.console && window.console.log && Function.prototype.bind.call(window.console.log, window.console).apply(window.console, [Date.now() - i.options.start + "ms", "html2canvas:"].concat([].slice.call(arguments, 0))) }; i.options = { logging: !1 }; t.exports = i }, {}], 14: [function (n, t) { function i(n, t) { this.node = n; this.parent = t; this.stack = null; this.bounds = null; this.borders = null; this.clip = []; this.backgroundClip = []; this.offsetBounds = null; this.visible = null; this.computedStyles = null; this.colors = {}; this.styles = {}; this.backgroundImages = null; this.transformData = null; this.transformMatrix = null; this.isPseudoElement = !1; this.opacity = null } function h(n) { var t = n.options[n.selectedIndex || 0]; return t ? t.text || "" : "" } function c(n) { if (n && n[1] === "matrix") return n[2].split(",").map(function (n) { return parseFloat(n.trim()) }); if (n && n[1] === "matrix3d") { var t = n[2].split(",").map(function (n) { return parseFloat(n.trim()) }); return [t[0], t[1], t[4], t[5], t[12], t[13]] } } function r(n) { return n.toString().indexOf("%") !== -1 } function l(n) { return n.replace("px", "") } function a(n) { return parseFloat(n) } var f = n("./color"), u = n("./utils"), e = u.getBounds, o = u.parseBackgrounds, s = u.offsetBounds; i.prototype.cloneTo = function (n) { n.visible = this.visible; n.borders = this.borders; n.bounds = this.bounds; n.clip = this.clip; n.backgroundClip = this.backgroundClip; n.computedStyles = this.computedStyles; n.styles = this.styles; n.backgroundImages = this.backgroundImages; n.opacity = this.opacity }; i.prototype.getOpacity = function () { return this.opacity === null ? this.opacity = this.cssFloat("opacity") : this.opacity }; i.prototype.assignStack = function (n) { this.stack = n; n.children.push(this) }; i.prototype.isElementVisible = function () { return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : this.css("display") !== "none" && this.css("visibility") !== "hidden" && !this.node.hasAttribute("data-html2canvas-ignore") && (this.node.nodeName !== "INPUT" || this.node.getAttribute("type") !== "hidden") }; i.prototype.css = function (n) { return this.computedStyles || (this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? ":before" : ":after") : this.computedStyle(null)), this.styles[n] || (this.styles[n] = this.computedStyles[n]) }; i.prototype.prefixedCss = function (n) { var t = this.css(n); return t === undefined && ["webkit", "moz", "ms", "o"].some(function (i) { return t = this.css(i + n.substr(0, 1).toUpperCase() + n.substr(1)), t !== undefined }, this), t === undefined ? null : t }; i.prototype.computedStyle = function (n) { return this.node.ownerDocument.defaultView.getComputedStyle(this.node, n) }; i.prototype.cssInt = function (n) { var t = parseInt(this.css(n), 10); return isNaN(t) ? 0 : t }; i.prototype.color = function (n) { return this.colors[n] || (this.colors[n] = new f(this.css(n))) }; i.prototype.cssFloat = function (n) { var t = parseFloat(this.css(n)); return isNaN(t) ? 0 : t }; i.prototype.fontWeight = function () { var n = this.css("fontWeight"); switch (parseInt(n, 10)) { case 401: n = "bold"; break; case 400: n = "normal" }return n }; i.prototype.parseClip = function () { var n = this.css("clip").match(this.CLIP); return n ? { top: parseInt(n[1], 10), right: parseInt(n[2], 10), bottom: parseInt(n[3], 10), left: parseInt(n[4], 10) } : null }; i.prototype.parseBackgroundImages = function () { return this.backgroundImages || (this.backgroundImages = o(this.css("backgroundImage"))) }; i.prototype.cssList = function (n, t) { var i = (this.css(n) || "").split(","); return i = i[t || 0] || i[0] || "auto", i = i.trim().split(" "), i.length === 1 && (i = [i[0], r(i[0]) ? "auto" : i[0]]), i }; i.prototype.parseBackgroundSize = function (n, t, i) { var u = this.cssList("backgroundSize", i), f, o, s, e; if (r(u[0])) f = n.width * parseFloat(u[0]) / 100; else { if (/contain|cover/.test(u[0])) return s = n.width / n.height, e = t.width / t.height, s < e ^ u[0] === "contain" ? { width: n.height * e, height: n.height } : { width: n.width, height: n.width / e }; f = parseInt(u[0], 10) } return o = u[0] === "auto" && u[1] === "auto" ? t.height : u[1] === "auto" ? f / t.width * t.height : r(u[1]) ? n.height * parseFloat(u[1]) / 100 : parseInt(u[1], 10), u[0] === "auto" && (f = o / t.height * t.width), { width: f, height: o } }; i.prototype.parseBackgroundPosition = function (n, t, i, u) { var f = this.cssList("backgroundPosition", i), e, o; return e = r(f[0]) ? (n.width - (u || t).width) * (parseFloat(f[0]) / 100) : parseInt(f[0], 10), o = f[1] === "auto" ? e / t.width * t.height : r(f[1]) ? (n.height - (u || t).height) * parseFloat(f[1]) / 100 : parseInt(f[1], 10), f[0] === "auto" && (e = o / t.height * t.width), { left: e, top: o } }; i.prototype.parseBackgroundRepeat = function (n) { return this.cssList("backgroundRepeat", n)[0] }; i.prototype.parseTextShadows = function () { var r = this.css("textShadow"), u = [], t, i, n; if (r && r !== "none") for (t = r.match(this.TEXT_SHADOW_PROPERTY), i = 0; t && i < t.length; i++)n = t[i].match(this.TEXT_SHADOW_VALUES), u.push({ color: new f(n[0]), offsetX: n[1] ? parseFloat(n[1].replace("px", "")) : 0, offsetY: n[2] ? parseFloat(n[2].replace("px", "")) : 0, blur: n[3] ? n[3].replace("px", "") : 0 }); return u }; i.prototype.parseTransform = function () { if (!this.transformData) if (this.hasTransform()) { var t = this.parseBounds(), n = this.prefixedCss("transformOrigin").split(" ").map(l).map(a); n[0] += t.left; n[1] += t.top; this.transformData = { origin: n, matrix: this.parseTransformMatrix() } } else this.transformData = { origin: [0, 0], matrix: [1, 0, 0, 1, 0, 0] }; return this.transformData }; i.prototype.parseTransformMatrix = function () { if (!this.transformMatrix) { var n = this.prefixedCss("transform"), t = n ? c(n.match(this.MATRIX_PROPERTY)) : null; this.transformMatrix = t ? t : [1, 0, 0, 1, 0, 0] } return this.transformMatrix }; i.prototype.parseBounds = function () { return this.bounds || (this.bounds = this.hasTransform() ? s(this.node) : e(this.node)) }; i.prototype.hasTransform = function () { return this.parseTransformMatrix().join(",") !== "1,0,0,1,0,0" || this.parent && this.parent.hasTransform() }; i.prototype.getValue = function () { var n = this.node.value || ""; return this.node.tagName === "SELECT" ? n = h(this.node) : this.node.type === "password" && (n = Array(n.length + 1).join("•")), n.length === 0 ? this.node.placeholder || "" : n }; i.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\((.+)\)/; i.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g; i.prototype.TEXT_SHADOW_VALUES = /(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g; i.prototype.CLIP = /^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/; t.exports = i }, { "./color": 3, "./utils": 26 }], 15: [function (n, t) { function i(n, t, i, f, e) { var o, s; r("Starting NodeParser"); this.renderer = t; this.options = e; this.range = null; this.support = i; this.renderQueue = []; this.stack = new k(!0, 1, n.ownerDocument, null); o = new w(n, null); e.background && t.rectangle(0, 0, t.width, t.height, new u(e.background)); n === n.ownerDocument.documentElement && (s = new w(o.color("backgroundColor").isTransparent() ? n.ownerDocument.body : n.ownerDocument.documentElement, null), t.rectangle(0, 0, t.width, t.height, s.color("backgroundColor"))); o.visibile = o.isElementVisible(); this.createPseudoHideStyles(n.ownerDocument); this.disableAnimations(n.ownerDocument); this.nodes = it([o].concat(this.getChildren(o)).filter(function (n) { return n.visible = n.isElementVisible() }).map(this.getPseudoElements, this)); this.fontMetrics = new ct; r("Fetched nodes, total:", this.nodes.length); r("Calculate overflow clips"); this.calculateOverflowClips(); r("Start fetching images"); this.images = f.fetch(this.nodes.filter(l)); this.ready = this.images.ready.then(d(function () { return r("Images loaded, starting parsing"), r("Creating stacking contexts"), this.createStackingContexts(), r("Sorting stacking contexts"), this.sortStackingContexts(this.stack), this.parse(this.stack), r("Render queue created with " + this.renderQueue.length + " items"), new Promise(d(function (n) { e.async ? typeof e.async == "function" ? e.async.call(this, this.renderQueue, n) : this.renderQueue.length > 0 ? (this.renderIndex = 0, this.asyncRenderer(this.renderQueue, n)) : n() : (this.renderQueue.forEach(this.paint, this), n()) }, this)) }, this)) } function rt(n) { return n.parent && n.parent.clip.length } function yt(n) { return n.replace(/(\-[a-z])/g, function (n) { return n.toUpperCase().replace("-", "") }) } function ut() { } function ft(n, t, i, r) { return n.map(function (u, f) { if (u.width > 0) { var o = t.left, e = t.top, s = t.width, h = t.height - n[2].width; switch (f) { case 0: h = n[0].width; u.args = p({ c1: [o, e], c2: [o + s, e], c3: [o + s - n[1].width, e + h], c4: [o + n[3].width, e + h] }, r[0], r[1], i.topLeftOuter, i.topLeftInner, i.topRightOuter, i.topRightInner); break; case 1: o = t.left + t.width - n[1].width; s = n[1].width; u.args = p({ c1: [o + s, e], c2: [o + s, e + h + n[2].width], c3: [o, e + h], c4: [o, e + n[0].width] }, r[1], r[2], i.topRightOuter, i.topRightInner, i.bottomRightOuter, i.bottomRightInner); break; case 2: e = e + t.height - n[2].width; h = n[2].width; u.args = p({ c1: [o + s, e + h], c2: [o, e + h], c3: [o + n[3].width, e], c4: [o + s - n[3].width, e] }, r[2], r[3], i.bottomRightOuter, i.bottomRightInner, i.bottomLeftOuter, i.bottomLeftInner); break; case 3: s = n[3].width; u.args = p({ c1: [o, e + h + n[2].width], c2: [o, e], c3: [o + s, e + n[0].width], c4: [o + s, e + h] }, r[3], r[0], i.bottomLeftOuter, i.bottomLeftInner, i.topLeftOuter, i.topLeftInner) } } return u }) } function f(n, t, i, r) { var h = 4 * ((Math.sqrt(2) - 1) / 3), e = i * h, s = r * h, u = n + i, f = t + r; return { topLeft: o({ x: n, y: f }, { x: n, y: f - s }, { x: u - e, y: t }, { x: u, y: t }), topRight: o({ x: n, y: t }, { x: n + e, y: t }, { x: u, y: f - s }, { x: u, y: f }), bottomRight: o({ x: u, y: t }, { x: u, y: t + s }, { x: n + e, y: f }, { x: n, y: f }), bottomLeft: o({ x: u, y: f }, { x: u - e, y: f }, { x: n, y: t + s }, { x: n, y: t }) } } function et(n, t, i) { var e = n.left, o = n.top, r = n.width, u = n.height, v = t[0][0] < r / 2 ? t[0][0] : r / 2, y = t[0][1] < u / 2 ? t[0][1] : u / 2, s = t[1][0] < r / 2 ? t[1][0] : r / 2, p = t[1][1] < u / 2 ? t[1][1] : u / 2, h = t[2][0] < r / 2 ? t[2][0] : r / 2, c = t[2][1] < u / 2 ? t[2][1] : u / 2, w = t[3][0] < r / 2 ? t[3][0] : r / 2, l = t[3][1] < u / 2 ? t[3][1] : u / 2, a = r - s, b = u - c, k = r - h, d = u - l; return { topLeftOuter: f(e, o, v, y).topLeft.subdivide(.5), topLeftInner: f(e + i[3].width, o + i[0].width, Math.max(0, v - i[3].width), Math.max(0, y - i[0].width)).topLeft.subdivide(.5), topRightOuter: f(e + a, o, s, p).topRight.subdivide(.5), topRightInner: f(e + Math.min(a, r + i[3].width), o + i[0].width, a > r + i[3].width ? 0 : s - i[3].width, p - i[0].width).topRight.subdivide(.5), bottomRightOuter: f(e + k, o + b, h, c).bottomRight.subdivide(.5), bottomRightInner: f(e + Math.min(k, r - i[3].width), o + Math.min(b, u + i[0].width), Math.max(0, h - i[1].width), c - i[2].width).bottomRight.subdivide(.5), bottomLeftOuter: f(e, o + d, w, l).bottomLeft.subdivide(.5), bottomLeftInner: f(e + i[3].width, o + d, Math.max(0, w - i[3].width), l - i[2].width).bottomLeft.subdivide(.5) } } function o(n, t, i, r) { var u = function (n, t, i) { return { x: n.x + (t.x - n.x) * i, y: n.y + (t.y - n.y) * i } }; return { start: n, startControl: t, endControl: i, end: r, subdivide: function (f) { var e = u(n, t, f), s = u(t, i, f), h = u(i, r, f), c = u(e, s, f), l = u(s, h, f), a = u(c, l, f); return [o(n, e, c, a), o(a, l, h, r)] }, curveTo: function (n) { n.push(["bezierCurve", t.x, t.y, i.x, i.y, r.x, r.y]) }, curveToReversed: function (r) { r.push(["bezierCurve", i.x, i.y, t.x, t.y, n.x, n.y]) } } } function p(n, t, i, r, u, f, e) { var o = []; return t[0] > 0 || t[1] > 0 ? (o.push(["line", r[1].start.x, r[1].start.y]), r[1].curveTo(o)) : o.push(["line", n.c1[0], n.c1[1]]), i[0] > 0 || i[1] > 0 ? (o.push(["line", f[0].start.x, f[0].start.y]), f[0].curveTo(o), o.push(["line", e[0].end.x, e[0].end.y]), e[0].curveToReversed(o)) : (o.push(["line", n.c2[0], n.c2[1]]), o.push(["line", n.c3[0], n.c3[1]])), t[0] > 0 || t[1] > 0 ? (o.push(["line", u[1].end.x, u[1].end.y]), u[1].curveToReversed(o)) : o.push(["line", n.c4[0], n.c4[1]]), o } function e(n, t, i, r, u, f, e) { t[0] > 0 || t[1] > 0 ? (n.push(["line", r[0].start.x, r[0].start.y]), r[0].curveTo(n), r[1].curveTo(n)) : n.push(["line", f, e]); (i[0] > 0 || i[1] > 0) && n.push(["line", u[0].start.x, u[0].start.y]) } function pt(n) { return n.cssInt("zIndex") < 0 } function wt(n) { return n.cssInt("zIndex") > 0 } function ot(n) { return n.cssInt("zIndex") === 0 } function st(n) { return ["inline", "inline-block", "inline-table"].indexOf(n.css("display")) !== -1 } function ht(n) { return n instanceof k } function bt(n) { return n.node.data.trim().length > 0 } function kt(n) { return /^(normal|none|0px)$/.test(n.parent.css("letterSpacing")) } function dt(n) { return ["TopLeft", "TopRight", "BottomRight", "BottomLeft"].map(function (t) { var r = n.css("border" + t + "Radius"), i = r.split(" "); return i.length <= 1 && (i[1] = i[0]), i.map(ui) }) } function gt(n) { return n.nodeType === Node.TEXT_NODE || n.nodeType === Node.ELEMENT_NODE } function ni(n) { var t = n.css("position"), i = ["absolute", "relative", "fixed"].indexOf(t) !== -1 ? n.css("zIndex") : "auto"; return i !== "auto" } function h(n) { return n.css("position") !== "static" } function nt(n) { return n.css("float") !== "none" } function ti(n) { return ["inline-block", "inline-table"].indexOf(n.css("display")) !== -1 } function c(n) { var t = this; return function () { return !n.apply(t, arguments) } } function l(n) { return n.node.nodeType === Node.ELEMENT_NODE } function a(n) { return n.isPseudoElement === !0 } function tt(n) { return n.node.nodeType === Node.TEXT_NODE } function ii(n) { return function (t, i) { return t.cssInt("zIndex") + n.indexOf(t) / n.length - (i.cssInt("zIndex") + n.indexOf(i) / n.length) } } function ri(n) { return n.getOpacity() < 1 } function ui(n) { return parseInt(n, 10) } function fi(n) { return n.width } function ei(n) { return n.node.nodeType !== Node.ELEMENT_NODE || ["SCRIPT", "HEAD", "TITLE", "OBJECT", "BR", "OPTION"].indexOf(n.node.nodeName) === -1 } function it(n) { return [].concat.apply([], n) } function oi(n) { var t = n.substr(0, 1); return t === n.substr(n.length - 1) && t.match(/'|"/) ? n.substr(1, n.length - 2) : n } function si(n) { for (var r = [], t = 0, u = !1, i; n.length;)hi(n[t]) === u ? (i = n.splice(0, t), i.length && r.push(v.ucs2.encode(i)), u = !u, t = 0) : t++, t >= n.length && (i = n.splice(0, t), i.length && r.push(v.ucs2.encode(i))); return r } function hi(n) { return [32, 13, 10, 9, 45].indexOf(n) !== -1 } function ci(n) { return /[^\u0000-\u00ff]/.test(n) } var r = n("./log"), v = n("punycode"), w = n("./nodecontainer"), b = n("./textcontainer"), s = n("./pseudoelementcontainer"), ct = n("./fontmetrics"), u = n("./color"), k = n("./stackingcontext"), y = n("./utils"), d = y.bind, lt = y.getBounds, at = y.parseBackgrounds, vt = y.offsetBounds, g; i.prototype.calculateOverflowClips = function () { this.nodes.forEach(function (n) { if (l(n)) { a(n) && n.appendToDOM(); n.borders = this.parseBorders(n); var i = n.css("overflow") === "hidden" ? [n.borders.clip] : [], t = n.parseClip(); t && ["absolute", "fixed"].indexOf(n.css("position")) !== -1 && i.push([["rect", n.bounds.left + t.left, n.bounds.top + t.top, t.right - t.left, t.bottom - t.top]]); n.clip = rt(n) ? n.parent.clip.concat(i) : i; n.backgroundClip = n.css("overflow") !== "hidden" ? n.clip.concat([n.borders.clip]) : n.clip; a(n) && n.cleanDOM() } else tt(n) && (n.clip = rt(n) ? n.parent.clip : []); a(n) || (n.bounds = null) }, this) }; i.prototype.asyncRenderer = function (n, t, i) { i = i || Date.now(); this.paint(n[this.renderIndex++]); n.length === this.renderIndex ? t() : i + 20 > Date.now() ? this.asyncRenderer(n, t, i) : setTimeout(d(function () { this.asyncRenderer(n, t) }, this), 0) }; i.prototype.createPseudoHideStyles = function (n) { this.createStyles(n, "." + s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: "" !important; display: none !important; }.' + s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: "" !important; display: none !important; }') }; i.prototype.disableAnimations = function (n) { this.createStyles(n, "* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}") }; i.prototype.createStyles = function (n, t) { var i = n.createElement("style"); i.innerHTML = t; n.body.appendChild(i) }; i.prototype.getPseudoElements = function (n) { var t = [[n]], i, r; return n.node.nodeType === Node.ELEMENT_NODE && (i = this.getPseudoElement(n, ":before"), r = this.getPseudoElement(n, ":after"), i && t.push(i), r && t.push(r)), it(t) }; i.prototype.getPseudoElement = function (n, t) { var i = n.computedStyle(t), u, o, h; if (!i || !i.content || i.content === "none" || i.content === "-moz-alt-content" || i.display === "none") return null; var f = oi(i.content), c = f.substr(0, 3) === "url", r = document.createElement(c ? "img" : "html2canvaspseudoelement"), e = new s(r, n, t); for (u = i.length - 1; u >= 0; u--)o = yt(i.item(u)), r.style[o] = i[o]; return r.className = s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + " " + s.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER, c ? (r.src = at(f)[0].args[0], [e]) : (h = document.createTextNode(f), r.appendChild(h), [e, new b(h, e)]) }; i.prototype.getChildren = function (n) { return it([].filter.call(n.node.childNodes, gt).map(function (t) { var i = [t.nodeType === Node.TEXT_NODE ? new b(t, n) : new w(t, n)].filter(ei); return t.nodeType === Node.ELEMENT_NODE && i.length && t.tagName !== "TEXTAREA" ? i[0].isElementVisible() ? i.concat(this.getChildren(i[0])) : [] : i }, this)) }; i.prototype.newStackingContext = function (n, t) { var i = new k(t, n.getOpacity(), n.node, n.parent), r; n.cloneTo(i); r = t ? i.getParentStack(this) : i.parent.stack; r.contexts.push(i); n.stack = i }; i.prototype.createStackingContexts = function () { this.nodes.forEach(function (n) { l(n) && (this.isRootElement(n) || ri(n) || ni(n) || this.isBodyWithTransparentRoot(n) || n.hasTransform()) ? this.newStackingContext(n, !0) : l(n) && (h(n) && ot(n) || ti(n) || nt(n)) ? this.newStackingContext(n, !1) : n.assignStack(n.parent.stack) }, this) }; i.prototype.isBodyWithTransparentRoot = function (n) { return n.node.nodeName === "BODY" && n.parent.color("backgroundColor").isTransparent() }; i.prototype.isRootElement = function (n) { return n.parent === null }; i.prototype.sortStackingContexts = function (n) { n.contexts.sort(ii(n.contexts.slice(0))); n.contexts.forEach(this.sortStackingContexts, this) }; i.prototype.parseTextBounds = function (n) { return function (t, i, r) { var u, f, e; if (n.parent.css("textDecoration").substr(0, 4) !== "none" || t.trim().length !== 0) { if (this.support.rangeBounds && !n.parent.hasTransform()) return u = r.slice(0, i).join("").length, this.getRangeBounds(n.node, u, t.length); if (n.node && typeof n.node.data == "string") return f = n.node.splitText(t.length), e = this.getWrapperBounds(n.node, n.parent.hasTransform()), n.node = f, e } else (!this.support.rangeBounds || n.parent.hasTransform()) && (n.node = n.node.splitText(t.length)); return {} } }; i.prototype.getWrapperBounds = function (n, t) { var i = n.ownerDocument.createElement("html2canvaswrapper"), r = n.parentNode, f = n.cloneNode(!0), u; return i.appendChild(n.cloneNode(!0)), r.replaceChild(i, n), u = t ? vt(i) : lt(i), r.replaceChild(f, i), u }; i.prototype.getRangeBounds = function (n, t, i) { var r = this.range || (this.range = n.ownerDocument.createRange()); return r.setStart(n, t), r.setEnd(n, t + i), r.getBoundingClientRect() }; i.prototype.parse = function (n) { var r = n.contexts.filter(pt), i = n.children.filter(l), t = i.filter(c(nt)), u = t.filter(c(h)).filter(c(st)), f = i.filter(c(h)).filter(nt), e = t.filter(c(h)).filter(st), o = n.contexts.concat(t.filter(h)).filter(ot), s = n.children.filter(tt).filter(bt), a = n.contexts.filter(wt); r.concat(u).concat(f).concat(e).concat(o).concat(s).concat(a).forEach(function (n) { this.renderQueue.push(n); ht(n) && (this.parse(n), this.renderQueue.push(new ut)) }, this) }; i.prototype.paint = function (n) { try { n instanceof ut ? this.renderer.ctx.restore() : tt(n) ? (a(n.parent) && n.parent.appendToDOM(), this.paintText(n), a(n.parent) && n.parent.cleanDOM()) : this.paintNode(n) } catch (t) { if (r(t), this.options.strict) throw t; } }; i.prototype.paintNode = function (n) { ht(n) && (this.renderer.setOpacity(n.opacity), this.renderer.ctx.save(), n.hasTransform() && this.renderer.setTransform(n.parseTransform())); n.node.nodeName === "INPUT" && n.node.type === "checkbox" ? this.paintCheckbox(n) : n.node.nodeName === "INPUT" && n.node.type === "radio" ? this.paintRadio(n) : this.paintElement(n) }; i.prototype.paintElement = function (n) { var t = n.parseBounds(); this.renderer.clip(n.backgroundClip, function () { this.renderer.renderBackground(n, t, n.borders.borders.map(fi)) }, this); this.renderer.clip(n.clip, function () { this.renderer.renderBorders(n.borders.borders) }, this); this.renderer.clip(n.backgroundClip, function () { var i, u; switch (n.node.nodeName) { case "svg": case "IFRAME": i = this.images.get(n.node); i ? this.renderer.renderImage(n, t, n.borders, i) : r("Error loading <" + n.node.nodeName + ">", n.node); break; case "IMG": u = this.images.get(n.node.src); u ? this.renderer.renderImage(n, t, n.borders, u) : r("Error loading <img>", n.node.src); break; case "CANVAS": this.renderer.renderImage(n, t, n.borders, { image: n.node }); break; case "SELECT": case "INPUT": case "TEXTAREA": this.paintFormValue(n) } }, this) }; i.prototype.paintCheckbox = function (n) { var r = n.parseBounds(), i = Math.min(r.width, r.height), t = { width: i - 1, height: i - 1, top: r.top, left: r.left }, f = [3, 3], e = [f, f, f, f], o = [1, 1, 1, 1].map(function (n) { return { color: new u("#A5A5A5"), width: n } }), s = et(t, e, o); this.renderer.clip(n.backgroundClip, function () { this.renderer.rectangle(t.left + 1, t.top + 1, t.width - 2, t.height - 2, new u("#DEDEDE")); this.renderer.renderBorders(ft(o, t, s, e)); n.node.checked && (this.renderer.font(new u("#424242"), "normal", "normal", "bold", i - 3 + "px","Inter"),this.renderer.text("✔",t.left+i/6,t.top+i-1))},this)};i.prototype.paintRadio=function(n){var t=n.parseBounds(),i=Math.min(t.width,t.height)-2;this.renderer.clip(n.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,i,new u("#DEDEDE"),1,new u("#A5A5A5"));n.node.checked&&this.renderer.circle(Math.ceil(t.left+i/4)+1,Math.ceil(t.top+i/4)+1,Math.floor(i/2),new u("#424242"))},this)};i.prototype.paintFormValue=function(n){var f=n.getValue(),u;if(f.length>0){var i=n.node.ownerDocument,t=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(i){try{t.style[i]=n.css(i)}catch(u){r("html2canvas: Parse: Exception caught in renderFormValue: "+u.message)}});u=n.parseBounds();t.style.position="fixed";t.style.left=u.left+"px";t.style.top=u.top+"px";t.textContent=f;i.body.appendChild(t);this.paintText(new b(t.firstChild,n));i.body.removeChild(t)}};i.prototype.paintText=function(n){n.applyTextTransform();var i=v.ucs2.decode(n.node.data),r=(!this.options.letterRendering||kt(n))&&!ci(n.node.data)?si(i):i.map(function(n){return v.ucs2.encode([n])}),e=n.parent.fontWeight(),u=n.parent.css("fontSize"),f=n.parent.css("fontFamily"),t=n.parent.parseTextShadows();this.renderer.font(n.parent.color("color"),n.parent.css("fontStyle"),n.parent.css("fontVariant"),e,u,f);t.length?this.renderer.fontShadow(t[0].color,t[0].offsetX,t[0].offsetY,t[0].blur):this.renderer.clearShadow();this.renderer.clip(n.parent.clip,function(){r.map(this.parseTextBounds(n),this).forEach(function(t,i){t&&(this.renderer.text(r[i],t.left,t.bottom),this.renderTextDecoration(n.parent,t,this.fontMetrics.getMetrics(f,u)))},this)},this)};i.prototype.renderTextDecoration=function(n,t,i){switch(n.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+i.baseline+i.lineWidth),t.width,1,n.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,n.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+i.middle+i.lineWidth),t.width,1,n.color("color"))}};g={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};i.prototype.parseBorders=function(n){var t=n.parseBounds(),i=dt(n),r=["Top","Right","Bottom","Left"].map(function(t,i){var e=n.css("border"+t+"Style"),r=n.color("border"+t+"Color"),f;return e==="inset"&&r.isBlack()&&(r=new u([255,255,255,r.a])),f=g[e]?g[e][i]:null,{width:n.cssInt("border"+t+"Width"),color:f?r[f[0]](f[1]):r,args:null}}),f=et(t,i,r);return{clip:this.parseBackgroundClip(n,f,r,i,t),borders:ft(r,t,f,i)}};i.prototype.parseBackgroundClip=function(n,t,i,r,u){var o=n.css("backgroundClip"),f=[];switch(o){case"content-box":case"padding-box":e(f,r[0],r[1],t.topLeftInner,t.topRightInner,u.left+i[3].width,u.top+i[0].width);e(f,r[1],r[2],t.topRightInner,t.bottomRightInner,u.left+u.width-i[1].width,u.top+i[0].width);e(f,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,u.left+u.width-i[1].width,u.top+u.height-i[2].width);e(f,r[3],r[0],t.bottomLeftInner,t.topLeftInner,u.left+i[3].width,u.top+u.height-i[2].width);break;default:e(f,r[0],r[1],t.topLeftOuter,t.topRightOuter,u.left,u.top);e(f,r[1],r[2],t.topRightOuter,t.bottomRightOuter,u.left+u.width,u.top);e(f,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,u.left+u.width,u.top+u.height);e(f,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,u.left,u.top+u.height)}return f};t.exports=i},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(n,t,i){function u(n,t,i){var h="withCredentials"in new XMLHttpRequest,r,u;return t?(r=e(h),u=o(t,n,r),h?s(u):f(i,u,r).then(function(n){return l(n.content)})):Promise.reject("No proxy configured")}function v(n,t,i){var r="crossOrigin"in new Image,u=e(r),s=o(t,n,u);return r?Promise.resolve(s):f(i,s,u).then(function(n){return"data:"+n.type+";base64,"+n.content})}function f(n,t,i){return new Promise(function(r,u){var f=n.createElement("script"),e=function(){delete window.html2canvas.proxy[i];n.body.removeChild(f)};window.html2canvas.proxy[i]=function(n){e();r(n)};f.src=t;f.onerror=function(n){e();u(n)};n.body.appendChild(f)})}function e(n){return n?"":"html2canvas_"+Date.now()+"_"+ ++a+"_"+Math.round(Math.random()*1e5)}function o(n,t,i){return n+"?url="+encodeURIComponent(t)+(i.length?"&callback=html2canvas.proxy."+i:"")}function y(n){return function(t){var e=new DOMParser,i,u,f;try{i=e.parseFromString(t,"text/html")}catch(o){r("DOMParser not supported, falling back to createHTMLDocument");i=document.implementation.createHTMLDocument("");try{i.open();i.write(t);i.close()}catch(s){r("createHTMLDocument write not supported, falling back to document.body.innerHTML");i.body.innerHTML=t}}return u=i.querySelector("base"),u&&u.href.host||(f=i.createElement("base"),f.href=n,i.head.insertBefore(f,i.head.firstChild)),i}}function p(n,t,i,r,f,e){return new u(n,t,window.document).then(y(n)).then(function(n){return c(n,i,r,f,e,0,0)})}var s=n("./xhr"),h=n("./utils"),r=n("./log"),c=n("./clone"),l=h.decode64,a=0;i.Proxy=u;i.ProxyURL=v;i.loadUrlDocument=p},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(n,t){function r(n,t){var u=document.createElement("a"),r;u.href=n;n=u.href;this.src=n;this.image=new Image;r=this;this.promise=new Promise(function(u,f){r.image.crossOrigin="Anonymous";r.image.onload=u;r.image.onerror=f;new i(n,t,document).then(function(n){r.image.src=n})["catch"](f)})}var i=n("./proxy").ProxyURL;t.exports=r},{"./proxy":16}],18:[function(n,t){function i(n,t,i){r.call(this,n,t);this.isPseudoElement=!0;this.before=i===":before"}var r=n("./nodecontainer");i.prototype.cloneTo=function(n){i.prototype.cloneTo.call(this,n);n.isPseudoElement=!0;n.before=this.before};i.prototype=Object.create(r.prototype);i.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node);this.parent.node.className+=" "+this.getHideClass()};i.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")};i.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";i.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";t.exports=i},{"./nodecontainer":14}],19:[function(n,t){function i(n,t,i,r,u){this.width=n;this.height=t;this.images=i;this.options=r;this.document=u}var r=n("./log");i.prototype.renderImage=function(n,t,i,r){var f=n.cssInt("paddingLeft"),e=n.cssInt("paddingTop"),h=n.cssInt("paddingRight"),c=n.cssInt("paddingBottom"),u=i.borders,o=t.width-(u[1].width+u[3].width+f+h),s=t.height-(u[0].width+u[2].width+e+c);this.drawImage(r,0,0,r.image.width||o,r.image.height||s,t.left+f+u[3].width,t.top+e+u[0].width,o,s)};i.prototype.renderBackground=function(n,t,i){t.height>0&&t.width>0&&(this.renderBackgroundColor(n,t),this.renderBackgroundImage(n,t,i))};i.prototype.renderBackgroundColor=function(n,t){var i=n.color("backgroundColor");i.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,i)};i.prototype.renderBorders=function(n){n.forEach(this.renderBorder,this)};i.prototype.renderBorder=function(n){n.color.isTransparent()||n.args===null||this.drawShape(n.args,n.color)};i.prototype.renderBackgroundImage=function(n,t,i){var u=n.parseBackgroundImages();u.reverse().forEach(function(u,f,e){var o,s;switch(u.method){case"url":o=this.images.get(u.args[0]);o?this.renderBackgroundRepeating(n,t,o,e.length-(f+1),i):r("Error loading background-image",u.args[0]);break;case"linear-gradient":case"gradient":s=this.images.get(u.value);s?this.renderBackgroundGradient(s,t,i):r("Error loading background-image",u.args[0]);break;case"none":break;default:r("Unknown background-image type",u.args[0])}},this)};i.prototype.renderBackgroundRepeating=function(n,t,i,r,u){var f=n.parseBackgroundSize(t,i.image,r),e=n.parseBackgroundPosition(t,i.image,r,f),o=n.parseBackgroundRepeat(r);switch(o){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,e,f,t,t.left+u[3],t.top+e.top+u[0],99999,f.height,u);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,e,f,t,t.left+e.left+u[3],t.top+u[0],f.width,99999,u);break;case"no-repeat":this.backgroundRepeatShape(i,e,f,t,t.left+e.left+u[3],t.top+e.top+u[0],f.width,f.height,u);break;default:this.renderBackgroundRepeat(i,e,f,{top:t.top,left:t.left},u[3],u[0])}};t.exports=i},{"./log":13}],20:[function(n,t){function i(n,t){r.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");this.options.canvas||(this.canvas.width=n,this.canvas.height=t);this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};f("Initialized CanvasRenderer with size",n,"x",t)}function e(n){return n.length>0}var r=n("../renderer"),u=n("../lineargradientcontainer"),f=n("../log");i.prototype=Object.create(r.prototype);i.prototype.setFillStyle=function(n){return this.ctx.fillStyle=typeof n=="object"&&!!n.isColor?n.toString():n,this.ctx};i.prototype.rectangle=function(n,t,i,r,u){this.setFillStyle(u).fillRect(n,t,i,r)};i.prototype.circle=function(n,t,i,r){this.setFillStyle(r);this.ctx.beginPath();this.ctx.arc(n+i/2,t+i/2,i/2,0,Math.PI*2,!0);this.ctx.closePath();this.ctx.fill()};i.prototype.circleStroke=function(n,t,i,r,u,f){this.circle(n,t,i,r);this.ctx.strokeStyle=f.toString();this.ctx.stroke()};i.prototype.drawShape=function(n,t){this.shape(n);this.setFillStyle(t).fill()};i.prototype.taints=function(n){if(n.tainted===null){this.taintCtx.drawImage(n.image,0,0);try{this.taintCtx.getImageData(0,0,1,1);n.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d");n.tainted=!0}}return n.tainted};i.prototype.drawImage=function(n,t,i,r,u,f,e,o,s){(!this.taints(n)||this.options.allowTaint)&&this.ctx.drawImage(n.image,t,i,r,u,f,e,o,s)};i.prototype.clip=function(n,t,i){this.ctx.save();n.filter(e).forEach(function(n){this.shape(n).clip()},this);t.call(i);this.ctx.restore()};i.prototype.shape=function(n){return this.ctx.beginPath(),n.forEach(function(n,t){n[0]==="rect"?this.ctx.rect.apply(this.ctx,n.slice(1)):this.ctx[t===0?"moveTo":n[0]+"To"].apply(this.ctx,n.slice(1))},this),this.ctx.closePath(),this.ctx};i.prototype.font=function(n,t,i,r,u,f){this.setFillStyle(n).font=[t,i,r,u,f].join(" ").split(",")[0]};i.prototype.fontShadow=function(n,t,i,r){this.setVariable("shadowColor",n.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",i).setVariable("shadowBlur",r)};i.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")};i.prototype.setOpacity=function(n){this.ctx.globalAlpha=n};i.prototype.setTransform=function(n){this.ctx.translate(n.origin[0],n.origin[1]);this.ctx.transform.apply(this.ctx,n.matrix);this.ctx.translate(-n.origin[0],-n.origin[1])};i.prototype.setVariable=function(n,t){return this.variables[n]!==t&&(this.variables[n]=this.ctx[n]=t),this};i.prototype.text=function(n,t,i){this.ctx.fillText(n,t,i)};i.prototype.backgroundRepeatShape=function(n,t,i,r,u,f,e,o,s){var h=[["line",Math.round(u),Math.round(f)],["line",Math.round(u+e),Math.round(f)],["line",Math.round(u+e),Math.round(o+f)],["line",Math.round(u),Math.round(o+f)]];this.clip([h],function(){this.renderBackgroundRepeat(n,t,i,r,s[3],s[0])},this)};i.prototype.renderBackgroundRepeat=function(n,t,i,r,u,f){var e=Math.round(r.left+t.left+u),o=Math.round(r.top+t.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(n,i),"repeat"));this.ctx.translate(e,o);this.ctx.fill();this.ctx.translate(-e,-o)};i.prototype.renderBackgroundGradient=function(n,t){if(n instanceof u){var i=this.ctx.createLinearGradient(t.left+t.width*n.x0,t.top+t.height*n.y0,t.left+t.width*n.x1,t.top+t.height*n.y1);n.colorStops.forEach(function(n){i.addColorStop(n.stop,n.color.toString())});this.rectangle(t.left,t.top,t.width,t.height,i)}};i.prototype.resizeImage=function(n,t){var i=n.image,u,r;return i.width===t.width&&i.height===t.height?i:(r=document.createElement("canvas"),r.width=t.width,r.height=t.height,u=r.getContext("2d"),u.drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height),r)};t.exports=i},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(n,t){function i(n,t,i,u){r.call(this,i,u);this.ownStacking=n;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var r=n("./nodecontainer");i.prototype=Object.create(r.prototype);i.prototype.getParentStack=function(n){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(n):n.stack};t.exports=i},{"./nodecontainer":14}],22:[function(n,t){function i(n){this.rangeBounds=this.testRangeBounds(n);this.cors=this.testCORS();this.svg=this.testSVG()}i.prototype.testRangeBounds=function(n){var i,t,r,u,f=!1;return n.createRange&&(i=n.createRange(),i.getBoundingClientRect&&(t=n.createElement("boundtest"),t.style.height="123px",t.style.display="block",n.body.appendChild(t),i.selectNode(t),r=i.getBoundingClientRect(),u=r.height,u===123&&(f=!0),n.body.removeChild(t))),f};i.prototype.testCORS=function(){return typeof(new Image).crossOrigin!="undefined"};i.prototype.testSVG=function(){var n=new Image,t=document.createElement("canvas"),i=t.getContext("2d");n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><\/svg>";try{i.drawImage(n,0,0);t.toDataURL()}catch(r){return!1}return!0};t.exports=i},{}],23:[function(n,t){function i(n){this.src=n;this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(n)?Promise.resolve(t.inlineFormatting(n)):r(n)}).then(function(n){return new Promise(function(i){window.html2canvas.svg.fabric.loadSVGFromString(n,t.createCanvas.call(t,i))})})}var r=n("./xhr"),u=n("./utils").decode64;i.prototype.hasFabric=function(){return!window.html2canvas.svg||!window.html2canvas.svg.fabric?Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg")):Promise.resolve()};i.prototype.inlineFormatting=function(n){return/^data:image\/svg\+xml;base64,/.test(n)?this.decode64(this.removeContentType(n)):this.removeContentType(n)};i.prototype.removeContentType=function(n){return n.replace(/^data:image\/svg\+xml(;base64)?,/,"")};i.prototype.isInline=function(n){return/^data:image\/svg\+xml/i.test(n)};i.prototype.createCanvas=function(n){var t=this;return function(i,r){var u=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=u.lowerCanvasEl;u.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,r)).renderAll();n(u.lowerCanvasEl)}};i.prototype.decode64=function(n){return typeof atob=="function"?window.atob(n):u(n)};t.exports=i},{"./utils":26,"./xhr":28}],24:[function(n,t){function i(n,t){this.src=n;this.image=null;var i=this;this.promise=t?new Promise(function(t,r){i.image=new Image;i.image.onload=t;i.image.onerror=r;i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(n);i.image.complete===!0&&t(i.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(n,i.createCanvas.call(i,t))})})}var r=n("./svgcontainer");i.prototype=Object.create(r.prototype);t.exports=i},{"./svgcontainer":23}],25:[function(n,t){function i(n,t){r.call(this,n,t)}function u(n,t,i){if(n.length>0)return t+i.toUpperCase()}var r=n("./nodecontainer");i.prototype=Object.create(r.prototype);i.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};i.prototype.transform=function(n){var t=this.node.data;switch(n){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,u);case"uppercase":return t.toUpperCase();default:return t}};t.exports=i},{"./nodecontainer":14}],26:[function(n,t,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};i.bind=function(n,t){return function(){return n.apply(t,arguments)}};i.decode64=function(n){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=n.length,s,e,r,u,f,o,h,c="",t=0;t<l;t+=4)s=i.indexOf(n[t]),e=i.indexOf(n[t+1]),r=i.indexOf(n[t+2]),u=i.indexOf(n[t+3]),f=s<<2|e>>4,o=(e&15)<<4|r>>2,h=(r&3)<<6|u,c+=r===64?String.fromCharCode(f):u===64||u===-1?String.fromCharCode(f,o):String.fromCharCode(f,o,h);return c};i.getBounds=function(n){if(n.getBoundingClientRect){var t=n.getBoundingClientRect(),i=n.offsetWidth==null?t.width:n.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+i,left:t.left,width:i,height:n.offsetHeight==null?t.height:n.offsetHeight}}return{}};i.offsetBounds=function(n){var t=n.offsetParent?i.offsetBounds(n.offsetParent):{top:0,left:0};return{top:n.offsetTop+t.top,bottom:n.offsetTop+n.offsetHeight+t.top,right:n.offsetLeft+t.left+n.offsetWidth,left:n.offsetLeft+t.left,width:n.offsetWidth,height:n.offsetHeight}};i.parseBackgrounds=function(n){var a=" \r\n\t",t,i,o,h,u,l=[],r=0,s=0,f,e,c=function(){t&&(i.substr(0,1)==='"'&&(i=i.substr(1,i.length-2)),i&&e.push(i),t.substr(0,1)==="-"&&(h=t.indexOf("-",1)+1)>0&&(o=t.substr(0,h),t=t.substr(h)),l.push({prefix:o,method:t.toLowerCase(),value:u,args:e,image:null}));e=[];t=o=i=u=""};return e=[],t=o=i=u="",n.split("").forEach(function(n){if(r!==0||!(a.indexOf(n)>-1)){switch(n){case'"':f?f===n&&(f=null):f=n;break;case"(":if(f)break;else{if(r===0){r=1;u+=n;return}s++}break;case")":if(f)break;else if(r===1){if(s===0){r=0;u+=n;c();return}s--}break;case",":if(f)break;else{if(r===0){c();return}if(r===1&&s===0&&!t.match(/^url$/i)){e.push(i);i="";u+=n;return}}}u+=n;r===0?t+=n:i+=n}}),c(),l}},{}],27:[function(n,t){function r(n){i.apply(this,arguments);this.type=n.args[0]==="linear"?i.TYPES.LINEAR:i.TYPES.RADIAL}var i=n("./gradientcontainer");r.prototype=Object.create(i.prototype);t.exports=r},{"./gradientcontainer":9}],28:[function(n,t){function i(n){return new Promise(function(t,i){var r=new XMLHttpRequest;r.open("GET",n);r.onload=function(){r.status===200?t(r.responseText):i(new Error(r.statusText))};r.onerror=function(){i(new Error("Network Error"))};r.send()})}t.exports=i},{}]},{},[4])(4)})